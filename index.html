<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>LB-K SMART | Plateforme Commerciale Intelligente Multi-Boutiques</title>
    
    <!-- M√©tadonn√©es professionnelles -->
    <meta name="description" content="LB-K SMART - Plateforme WebApp commerciale intelligente multi-boutiques avec IA, WhatsApp Business int√©gr√© et gestion tactile avanc√©e">
    <meta name="keywords" content="e-commerce, boutique en ligne, IA, WhatsApp Business, gestion commerciale, Kolwezi, RDC, LB-K SMART">
    <meta name="author" content="LB-K SMART">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#0a0a1a">
    <meta property="og:title" content="LB-K SMART - Plateforme Commerciale Intelligente">
    <meta property="og:description" content="Solution e-commerce compl√®te avec IA int√©gr√©e et gestion multi-boutiques">
    <meta property="og:type" content="website">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü§ñ</text></svg>">
    
    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Toastr Notifications -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    
    <!-- Swiper Carousel -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    
    <!-- AOS Animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Main Styles -->
    <style>
        /* ============ VARIABLES & RESET ============ */
        :root {
            /* Couleurs principales */
            --primary: #0a0a1a;
            --secondary: #00f3ff;
            --accent: #7b00ff;
            --danger: #ff0066;
            --success: #00ff9d;
            --warning: #ffcc00;
            --light: #f0f8ff;
            --dark: #050510;
            
            /* Glassmorphism */
            --glass: rgba(255, 255, 255, 0.08);
            --glass-dark: rgba(5, 5, 16, 0.95);
            --glass-light: rgba(255, 255, 255, 0.12);
            
            /* Ombres */
            --shadow: 0 8px 32px rgba(0, 243, 255, 0.15);
            --shadow-lg: 0 20px 60px rgba(0, 243, 255, 0.2);
            --shadow-neon: 0 0 20px rgba(0, 243, 255, 0.5);
            
            /* Bordures */
            --radius: 12px;
            --radius-sm: 8px;
            --radius-lg: 20px;
            
            /* Transitions */
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Typographie */
            --font-title: 'Orbitron', sans-serif;
            --font-text: 'Inter', sans-serif;
            
            /* Gradients */
            --gradient: linear-gradient(135deg, var(--accent), var(--secondary));
            --gradient-reverse: linear-gradient(135deg, var(--secondary), var(--accent));
            --gradient-dark: linear-gradient(135deg, #0a0a1a, #050510);
            
            /* Modes */
            --mode-light-bg: #ffffff;
            --mode-light-text: #333333;
            --mode-light-glass: rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-text);
            background: var(--primary);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: var(--transition-slow);
        }

        body.light-mode {
            background: var(--mode-light-bg);
            color: var(--mode-light-text);
        }

        /* ============ ANIMATIONS ============ */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes slideInFromTop {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideInFromBottom {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideInFromLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideInFromRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px var(--secondary); }
            50% { box-shadow: 0 0 20px var(--secondary); }
        }

        .float { animation: float 3s ease-in-out infinite; }
        .pulse { animation: pulse 2s ease-in-out infinite; }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        .bounce { animation: bounce 2s infinite; }
        .glow { animation: glow 2s infinite; }
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        /* ============ GOUVERNANCE & ADMIN ============ */
        .admin-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            z-index: 99999;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .admin-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .admin-login {
            background: var(--glass-dark);
            padding: 3rem;
            border-radius: var(--radius-lg);
            border: 1px solid var(--secondary);
            box-shadow: var(--shadow-lg);
            max-width: 500px;
            width: 90%;
        }

        .light-mode .admin-login {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .admin-login h2 {
            color: var(--secondary);
            font-family: var(--font-title);
            margin-bottom: 2rem;
            text-align: center;
        }

        .light-mode .admin-login h2 {
            color: var(--accent);
        }

        .password-input {
            width: 100%;
            padding: 1rem;
            margin-bottom: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: var(--radius);
            color: var(--light);
            font-family: var(--font-text);
            font-size: 1rem;
            transition: var(--transition);
        }

        .light-mode .password-input {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: var(--mode-light-text);
        }

        .password-input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(0, 243, 255, 0.1);
        }

        .light-mode .password-input:focus {
            border-color: var(--accent);
        }

        .password-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .btn {
            padding: 0.8rem 2rem;
            border: none;
            border-radius: var(--radius);
            font-family: var(--font-text);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            flex: 1;
        }

        .btn-primary {
            background: var(--gradient);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .light-mode .btn-secondary {
            background: rgba(0, 0, 0, 0.1);
            color: var(--mode-light-text);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .light-mode .btn-secondary:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        /* ============ HEADER & NAVIGATION ============ */
        .main-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: var(--glass-dark);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 243, 255, 0.2);
            z-index: 1000;
            padding: 1rem 2rem;
            transition: var(--transition);
        }

        .light-mode .main-header {
            background: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Logo */
        .logo {
            font-family: var(--font-title);
            font-size: 1.8rem;
            font-weight: 900;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: var(--transition);
        }

        .light-mode .logo {
            background: linear-gradient(135deg, #7b00ff, #ff0066);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .logo:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 0 10px var(--secondary));
        }

        /* Menu Hamburger am√©lior√© */
        .hamburger {
            display: flex;
            flex-direction: column;
            gap: 4px;
            cursor: pointer;
            padding: 8px;
            background: transparent;
            border: none;
            position: relative;
            z-index: 1002;
        }

        .hamburger-line {
            width: 25px;
            height: 2px;
            background: var(--secondary);
            transition: var(--transition);
            border-radius: 2px;
        }

        .light-mode .hamburger-line {
            background: var(--accent);
        }

        .hamburger.active .hamburger-line:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .hamburger.active .hamburger-line:nth-child(2) {
            opacity: 0;
            transform: translateX(-10px);
        }

        .hamburger.active .hamburger-line:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        /* Drawer Menu */
        .drawer-menu {
            position: fixed;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100vh;
            background: var(--glass-dark);
            backdrop-filter: blur(30px);
            z-index: 1001;
            padding: 2rem;
            overflow-y: auto;
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .light-mode .drawer-menu {
            background: rgba(255, 255, 255, 0.98);
        }

        .drawer-menu.active {
            left: 0;
        }

        .drawer-content {
            max-width: 1400px;
            margin: 0 auto;
            padding-top: 80px;
        }

        .drawer-section {
            margin-bottom: 3rem;
        }

        .drawer-section h3 {
            color: var(--secondary);
            font-family: var(--font-title);
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .light-mode .drawer-section h3 {
            color: var(--accent);
        }

        .drawer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }

        .drawer-item {
            background: var(--glass);
            border: 1px solid rgba(0, 243, 255, 0.1);
            border-radius: var(--radius);
            padding: 1.5rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .light-mode .drawer-item {
            background: var(--mode-light-glass);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .drawer-item:hover {
            border-color: var(--secondary);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .light-mode .drawer-item:hover {
            border-color: var(--accent);
        }

        .drawer-item h4 {
            color: var(--light);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .light-mode .drawer-item h4 {
            color: var(--mode-light-text);
        }

        .drawer-item p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        .light-mode .drawer-item p {
            color: rgba(0, 0, 0, 0.7);
        }

        /* ============ BOUTONS FLOTTANTS CONFIGURABLES ============ */
        .floating-buttons-container {
            position: fixed;
            right: 30px;
            bottom: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 9998;
        }

        .floating-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: var(--gradient);
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .floating-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .floating-button:hover::before {
            left: 100%;
        }

        .floating-button:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: var(--shadow-lg);
        }

        .floating-button.whatsapp {
            background: linear-gradient(135deg, #25D366, #128C7E);
        }

        .floating-button.ai {
            background: linear-gradient(135deg, var(--accent), var(--danger));
            animation: pulse 2s infinite;
        }

        .floating-button.cart {
            background: linear-gradient(135deg, var(--success), var(--secondary));
        }

        .floating-button.display-mode {
            background: linear-gradient(135deg, var(--warning), var(--accent));
        }

        .floating-button.admin-panel {
            background: linear-gradient(135deg, #ffaa00, #ff0066);
        }

        .floating-button.theme-toggle {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .button-tooltip {
            position: absolute;
            right: 70px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.3s ease;
            pointer-events: none;
            border: 1px solid rgba(0, 243, 255, 0.2);
        }

        .floating-button:hover .button-tooltip {
            opacity: 1;
            transform: translateX(0);
        }

        /* ============ MODE AFFICHAGE TOGGLE ============ */
        .display-toggle {
            position: fixed;
            bottom: 30px;
            left: 30px;
            z-index: 9997;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 50px;
            padding: 8px;
            display: flex;
            gap: 5px;
            border: 1px solid rgba(0, 243, 255, 0.2);
        }

        .light-mode .display-toggle {
            background: var(--mode-light-glass);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .display-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: none;
            background: transparent;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: var(--transition);
        }

        .light-mode .display-btn {
            color: rgba(0, 0, 0, 0.7);
        }

        .display-btn.active {
            background: var(--gradient);
            color: white;
            box-shadow: var(--shadow);
        }

        .display-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .light-mode .display-btn:hover:not(.active) {
            background: rgba(0, 0, 0, 0.1);
            color: var(--mode-light-text);
        }

        /* ============ BARRE DE T√ÇCHES BASSE √Ä TIROIRS ============ */
        .bottom-taskbar {
            position: fixed;
            bottom: -300px;
            left: 0;
            width: 100%;
            background: var(--glass-dark);
            backdrop-filter: blur(30px);
            border-top: 1px solid rgba(0, 243, 255, 0.2);
            z-index: 9996;
            transition: bottom 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 1rem;
            max-height: 70vh;
            overflow-y: auto;
        }

        .light-mode .bottom-taskbar {
            background: rgba(255, 255, 255, 0.98);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .bottom-taskbar.active {
            bottom: 0;
            animation: slideInFromBottom 0.5s ease;
        }

        .taskbar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(0, 243, 255, 0.1);
        }

        .light-mode .taskbar-header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .taskbar-title {
            color: var(--secondary);
            font-family: var(--font-title);
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .light-mode .taskbar-title {
            color: var(--accent);
        }

        .taskbar-close {
            background: transparent;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .light-mode .taskbar-close {
            color: var(--mode-light-text);
        }

        .taskbar-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .light-mode .taskbar-close:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .taskbar-products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .taskbar-product {
            background: var(--glass);
            border-radius: var(--radius);
            padding: 1rem;
            border: 1px solid rgba(0, 243, 255, 0.1);
            transition: var(--transition);
            cursor: pointer;
        }

        .light-mode .taskbar-product {
            background: var(--mode-light-glass);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .taskbar-product:hover {
            border-color: var(--secondary);
            transform: translateY(-2px);
        }

        .light-mode .taskbar-product:hover {
            border-color: var(--accent);
        }

        .product-badge {
            display: inline-block;
            padding: 3px 8px;
            background: var(--danger);
            color: white;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-left: 5px;
        }

        .product-badge.stock {
            background: var(--success);
        }

        .light-mode .product-badge {
            color: white;
        }

        /* ============ CATALOGUE & PRODUITS ============ */
        .catalog-container {
            max-width: 1400px;
            margin: 100px auto 50px;
            padding: 20px;
        }

        .catalog-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .catalog-title {
            font-family: var(--font-title);
            font-size: 3rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 1rem;
        }

        .light-mode .catalog-title {
            background: linear-gradient(135deg, #7b00ff, #ff0066);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .catalog-subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .light-mode .catalog-subtitle {
            color: rgba(0, 0, 0, 0.7);
        }

        .boutique-section {
            margin-bottom: 4rem;
            background: var(--glass);
            border-radius: var(--radius-lg);
            padding: 2rem;
            border: 1px solid rgba(0, 243, 255, 0.1);
        }

        .light-mode .boutique-section {
            background: var(--mode-light-glass);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .boutique-title {
            font-family: var(--font-title);
            font-size: 2rem;
            color: var(--secondary);
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .light-mode .boutique-title {
            color: var(--accent);
        }

        .product-management {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .product-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 0.6rem 1.5rem;
            background: rgba(0, 243, 255, 0.1);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: var(--radius);
            color: var(--light);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .light-mode .action-btn {
            background: rgba(123, 0, 255, 0.1);
            border: 1px solid rgba(123, 0, 255, 0.3);
            color: var(--mode-light-text);
        }

        .action-btn:hover {
            background: rgba(0, 243, 255, 0.2);
            transform: translateY(-2px);
        }

        .light-mode .action-btn:hover {
            background: rgba(123, 0, 255, 0.2);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .product-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--radius);
            padding: 1.5rem;
            border: 1px solid transparent;
            transition: var(--transition);
            position: relative;
            cursor: move;
        }

        .light-mode .product-card {
            background: rgba(0, 0, 0, 0.03);
        }

        .product-card.dragging {
            opacity: 0.5;
            border: 2px dashed var(--secondary);
        }

        .light-mode .product-card.dragging {
            border: 2px dashed var(--accent);
        }

        .product-card:hover {
            border-color: var(--secondary);
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .light-mode .product-card:hover {
            border-color: var(--accent);
        }

        .product-image {
            width: 100%;
            height: 180px;
            background: rgba(0, 243, 255, 0.05);
            border-radius: var(--radius-sm);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--secondary);
            position: relative;
            overflow: hidden;
        }

        .light-mode .product-image {
            background: rgba(123, 0, 255, 0.05);
            color: var(--accent);
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .upload-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: var(--transition);
        }

        .upload-overlay:hover {
            opacity: 1;
        }

        .upload-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.9rem;
        }

        .product-info {
            text-align: center;
        }

        .product-name {
            color: var(--light);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .light-mode .product-name {
            color: var(--mode-light-text);
        }

        .product-price {
            color: var(--secondary);
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .light-mode .product-price {
            color: var(--accent);
        }

        .product-quantity {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .light-mode .product-quantity {
            color: rgba(0, 0, 0, 0.7);
        }

        .product-actions-buttons {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }

        .product-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .light-mode .product-btn {
            background: rgba(0, 0, 0, 0.1);
            color: var(--mode-light-text);
        }

        .product-btn:hover {
            background: var(--gradient);
            color: white;
            transform: scale(1.1);
        }

        /* ============ PANIER INTELLIGENT ============ */
        .cart-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: var(--glass-dark);
            backdrop-filter: blur(30px);
            z-index: 9999;
            padding: 2rem;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 1px solid rgba(0, 243, 255, 0.2);
        }

        .light-mode .cart-panel {
            background: rgba(255, 255, 255, 0.98);
            border-left: 1px solid rgba(0, 0, 0, 0.1);
        }

        .cart-panel.active {
            right: 0;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(0, 243, 255, 0.1);
        }

        .light-mode .cart-header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .cart-title {
            color: var(--secondary);
            font-family: var(--font-title);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .light-mode .cart-title {
            color: var(--accent);
        }

        .cart-items {
            margin-bottom: 2rem;
            max-height: 60vh;
            overflow-y: auto;
        }

        .cart-item {
            background: var(--glass);
            border-radius: var(--radius);
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(0, 243, 255, 0.1);
        }

        .light-mode .cart-item {
            background: var(--mode-light-glass);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .cart-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .cart-item-name {
            color: var(--light);
            font-weight: 600;
        }

        .light-mode .cart-item-name {
            color: var(--mode-light-text);
        }

        .cart-item-price {
            color: var(--secondary);
            font-weight: 700;
        }

        .light-mode .cart-item-price {
            color: var(--accent);
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 0.5rem;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid rgba(0, 243, 255, 0.3);
            background: transparent;
            color: var(--light);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .light-mode .quantity-btn {
            border: 1px solid rgba(0, 0, 0, 0.3);
            color: var(--mode-light-text);
        }

        .quantity-btn:hover {
            background: rgba(0, 243, 255, 0.1);
        }

        .light-mode .quantity-btn:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .cart-total {
            text-align: right;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(0, 243, 255, 0.1);
        }

        .light-mode .cart-total {
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .total-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        .light-mode .total-label {
            color: rgba(0, 0, 0, 0.7);
        }

        .total-amount {
            color: var(--secondary);
            font-size: 1.8rem;
            font-weight: 700;
        }

        .light-mode .total-amount {
            color: var(--accent);
        }

        .cart-empty {
            text-align: center;
            padding: 3rem 1rem;
            color: rgba(255, 255, 255, 0.5);
        }

        .light-mode .cart-empty {
            color: rgba(0, 0, 0, 0.5);
        }

        /* ============ IA SERVICE CLIENT ============ */
        .ai-chat-panel {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 400px;
            background: var(--glass-dark);
            backdrop-filter: blur(30px);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(0, 243, 255, 0.2);
            box-shadow: var(--shadow-lg);
            z-index: 9997;
            display: none;
            overflow: hidden;
        }

        .light-mode .ai-chat-panel {
            background: rgba(255, 255, 255, 0.98);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .ai-chat-panel.active {
            display: block;
            animation: slideInFromBottom 0.3s ease;
        }

        .ai-header {
            background: var(--gradient);
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ai-title {
            color: white;
            font-family: var(--font-title);
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-status {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
            animation: pulse 2s infinite;
        }

        .ai-messages {
            padding: 1.5rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .message {
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: var(--radius);
            max-width: 85%;
        }

        .message.ai {
            background: rgba(0, 243, 255, 0.1);
            border: 1px solid rgba(0, 243, 255, 0.2);
            margin-right: auto;
        }

        .light-mode .message.ai {
            background: rgba(0, 243, 255, 0.05);
            border: 1px solid rgba(0, 243, 255, 0.1);
        }

        .message.user {
            background: rgba(123, 0, 255, 0.1);
            border: 1px solid rgba(123, 0, 255, 0.2);
            margin-left: auto;
        }

        .light-mode .message.user {
            background: rgba(123, 0, 255, 0.05);
            border: 1px solid rgba(123, 0, 255, 0.1);
        }

        .ai-input-container {
            padding: 1.5rem;
            border-top: 1px solid rgba(0, 243, 255, 0.1);
        }

        .light-mode .ai-input-container {
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .ai-input {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: var(--radius);
            color: var(--light);
            font-family: var(--font-text);
            font-size: 1rem;
            resize: none;
            height: 60px;
        }

        .light-mode .ai-input {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: var(--mode-light-text);
        }

        .ai-input:focus {
            outline: none;
            border-color: var(--secondary);
        }

        .light-mode .ai-input:focus {
            border-color: var(--accent);
        }

        /* ============ NEWSLETTER ============ */
        .newsletter-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--gradient);
            padding: 1rem 2rem;
            z-index: 9995;
            transform: translateY(100%);
            transition: transform 0.4s ease;
        }

        .newsletter-bar.active {
            transform: translateY(0);
        }

        .newsletter-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .newsletter-text {
            color: white;
            font-weight: 600;
        }

        .newsletter-form {
            display: flex;
            gap: 10px;
            flex: 1;
            max-width: 500px;
        }

        .newsletter-input {
            flex: 1;
            padding: 0.8rem 1.2rem;
            border: none;
            border-radius: var(--radius);
            background: rgba(255, 255, 255, 0.9);
            font-family: var(--font-text);
        }

        .newsletter-input:focus {
            outline: none;
            background: white;
        }

        .subscriber-count {
            display: flex;
            align-items: center;
            gap: 8px;
            color: white;
            font-weight: 600;
        }

        .count-number {
            background: white;
            color: var(--accent);
            padding: 4px 8px;
            border-radius: 20px;
            font-weight: 700;
            animation: pulse 2s infinite;
        }

        /* ============ MINI PANNEAU ADMIN TOUCH SCREEN ============ */
        .admin-mini-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90vw;
            height: 90vh;
            background: var(--glass-dark);
            backdrop-filter: blur(50px);
            border-radius: var(--radius-lg);
            border: 2px solid var(--secondary);
            z-index: 100000;
            padding: 2rem;
            display: none;
            overflow: hidden;
        }

        .light-mode .admin-mini-panel {
            background: rgba(255, 255, 255, 0.98);
            border: 2px solid var(--accent);
        }

        .admin-mini-panel.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .admin-mini-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(0, 243, 255, 0.2);
        }

        .light-mode .admin-mini-header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .admin-mini-title {
            color: var(--secondary);
            font-family: var(--font-title);
            font-size: 2rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .light-mode .admin-mini-title {
            color: var(--accent);
        }

        .touch-buttons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .touch-button {
            background: var(--glass);
            border: 2px solid transparent;
            border-radius: var(--radius);
            padding: 2rem 1rem;
            text-align: center;
            cursor: move;
            transition: var(--transition);
            touch-action: none;
            user-select: none;
        }

        .light-mode .touch-button {
            background: var(--mode-light-glass);
        }

        .touch-button:hover {
            border-color: var(--secondary);
            transform: scale(1.05);
        }

        .light-mode .touch-button:hover {
            border-color: var(--accent);
        }

        .touch-button i {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--secondary);
        }

        .light-mode .touch-button i {
            color: var(--accent);
        }

        .touch-button h4 {
            color: var(--light);
            font-weight: 600;
        }

        .light-mode .touch-button h4 {
            color: var(--mode-light-text);
        }

        .movement-controls {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .light-mode .movement-controls {
            background: rgba(0, 0, 0, 0.05);
        }

        .movement-controls h4 {
            color: var(--secondary);
            margin-bottom: 1rem;
            font-family: var(--font-title);
        }

        .light-mode .movement-controls h4 {
            color: var(--accent);
        }

        .movement-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
        }

        .movement-option {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: var(--radius);
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .light-mode .movement-option {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .movement-option:hover {
            background: rgba(0, 243, 255, 0.1);
        }

        .light-mode .movement-option:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .movement-option.active {
            background: var(--gradient);
            border-color: var(--secondary);
            color: white;
        }

        .direction-controls {
            margin-top: 1rem;
        }

        .live-preview {
            background: rgba(0, 0, 0, 0.5);
            border-radius: var(--radius);
            padding: 2rem;
            text-align: center;
            border: 2px dashed rgba(0, 243, 255, 0.3);
            margin-top: 2rem;
        }

        .light-mode .live-preview {
            background: rgba(0, 0, 0, 0.05);
            border: 2px dashed rgba(0, 0, 0, 0.3);
        }

        .live-preview h4 {
            color: var(--secondary);
            margin-bottom: 1rem;
        }

        .light-mode .live-preview h4 {
            color: var(--accent);
        }

        /* ============ TERMINAL TECH ============ */
        .tech-terminal {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 70vh;
            background: #000;
            font-family: 'Courier New', monospace;
            z-index: 100001;
            display: none;
            flex-direction: column;
        }

        .tech-terminal.active {
            display: flex;
            animation: slideInFromBottom 0.3s ease;
        }

        .terminal-header {
            background: #333;
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .terminal-body {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            color: #00ff00;
            font-size: 0.9rem;
            white-space: pre-wrap;
        }

        .terminal-input {
            background: transparent;
            border: none;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            width: 100%;
            padding: 1rem;
            border-top: 1px solid #333;
        }

        .terminal-input:focus {
            outline: none;
        }

        /* ============ COMPTEUR VISITEURS ============ */
        .visitor-counter {
            position: fixed;
            top: 100px;
            right: 20px;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 10px 15px;
            font-size: 0.9rem;
            z-index: 999;
            border: 1px solid rgba(0, 243, 255, 0.2);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .light-mode .visitor-counter {
            background: var(--mode-light-glass);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .visitor-count {
            color: var(--secondary);
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        .light-mode .visitor-count {
            color: var(--accent);
        }

        /* ============ EMPLOYEE MANAGEMENT ============ */
        .employee-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 800px;
            max-width: 90vw;
            background: var(--glass-dark);
            backdrop-filter: blur(30px);
            border-radius: var(--radius-lg);
            border: 2px solid var(--secondary);
            z-index: 100002;
            padding: 2rem;
            display: none;
        }

        .light-mode .employee-panel {
            background: rgba(255, 255, 255, 0.98);
            border: 2px solid var(--accent);
        }

        .employee-panel.active {
            display: block;
        }

        .employee-list {
            max-height: 400px;
            overflow-y: auto;
            margin: 2rem 0;
        }

        .employee-item {
            background: var(--glass);
            border-radius: var(--radius);
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(0, 243, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .light-mode .employee-item {
            background: var(--mode-light-glass);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .employee-actions {
            display: flex;
            gap: 0.5rem;
        }

        .permission-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-right: 5px;
            color: white;
        }

        .permission-read { background: rgba(0, 243, 255, 0.5); }
        .permission-write { background: rgba(123, 0, 255, 0.5); }
        .permission-admin { background: rgba(255, 0, 102, 0.5); }
        .permission-banned { background: rgba(255, 204, 0, 0.5); }

        /* ============ SETTINGS PANEL ============ */
        .settings-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 800px;
            max-width: 90vw;
            background: var(--glass-dark);
            backdrop-filter: blur(30px);
            border-radius: var(--radius-lg);
            border: 2px solid var(--secondary);
            z-index: 100003;
            padding: 2rem;
            display: none;
            max-height: 90vh;
            overflow-y: auto;
        }

        .light-mode .settings-panel {
            background: rgba(255, 255, 255, 0.98);
            border: 2px solid var(--accent);
        }

        .settings-panel.active {
            display: block;
        }

        .settings-category {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .light-mode .settings-category {
            background: rgba(0, 0, 0, 0.05);
        }

        .settings-category h4 {
            color: var(--secondary);
            margin-bottom: 1rem;
            font-family: var(--font-title);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .light-mode .settings-category h4 {
            color: var(--accent);
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .light-mode .setting-item {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-label {
            flex: 1;
        }

        .setting-control {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: var(--transition);
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        input:checked + .slider {
            background: var(--gradient);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* ============ SKELETON LOADER ============ */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 4px;
        }

        .light-mode .skeleton {
            background: linear-gradient(90deg, #e0e0e0 25%, #d0d0d0 50%, #e0e0e0 75%);
        }

        @keyframes loading {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* ============ WHATSAPP BUSINESS ============ */
        .whatsapp-panel {
            position: fixed;
            bottom: 100px;
            left: 30px;
            width: 300px;
            background: rgba(37, 211, 102, 0.95);
            backdrop-filter: blur(10px);
            border-radius: var(--radius-lg);
            z-index: 9997;
            display: none;
            overflow: hidden;
        }

        .whatsapp-panel.active {
            display: block;
            animation: slideInFromBottom 0.3s ease;
        }

        .whatsapp-header {
            background: #128C7E;
            padding: 1rem;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .whatsapp-boutique {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 1.5rem;
        }

        .boutique-number {
            background: rgba(255, 255, 255, 0.9);
            border-radius: var(--radius);
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            color: #333;
        }

        .boutique-number:hover {
            background: white;
            transform: translateY(-2px);
        }

        /* ============ RESPONSIVE DESIGN ============ */
        @media (max-width: 1200px) {
            .cart-panel {
                width: 350px;
            }
            
            .ai-chat-panel {
                width: 350px;
            }
            
            .whatsapp-panel {
                width: 280px;
            }
        }

        @media (max-width: 768px) {
            .main-header {
                padding: 1rem;
            }
            
            .logo {
                font-size: 1.5rem;
            }
            
            .catalog-container {
                margin-top: 80px;
                padding: 10px;
            }
            
            .catalog-title {
                font-size: 2rem;
            }
            
            .floating-buttons-container {
                right: 20px;
                bottom: 20px;
            }
            
            .floating-button {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
            
            .button-tooltip {
                display: none;
            }
            
            .display-toggle {
                left: 20px;
                bottom: 20px;
            }
            
            .cart-panel {
                width: 100%;
                right: -100%;
            }
            
            .ai-chat-panel {
                width: calc(100% - 40px);
                right: 20px;
            }
            
            .whatsapp-panel {
                width: calc(100% - 40px);
                left: 20px;
            }
            
            .admin-mini-panel {
                width: 95vw;
                height: 95vh;
                padding: 1rem;
            }
            
            .touch-buttons-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .newsletter-content {
                flex-direction: column;
                text-align: center;
            }
            
            .newsletter-form {
                width: 100%;
            }
            
            .visitor-counter {
                top: 80px;
                right: 10px;
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .drawer-grid {
                grid-template-columns: 1fr;
            }
            
            .touch-buttons-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .visitor-counter {
                top: 80px;
                right: 10px;
                font-size: 0.8rem;
            }
            
            .newsletter-bar {
                padding: 1rem;
            }
            
            .newsletter-form {
                flex-direction: column;
            }
            
            .newsletter-input {
                width: 100%;
            }
        }

        /* ============ UTILITY CLASSES ============ */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .text-gradient {
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .light-mode .text-gradient {
            background: linear-gradient(135deg, #7b00ff, #ff0066);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .glass {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .light-mode .glass {
            background: var(--mode-light-glass);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .scrollbar {
            scrollbar-width: thin;
            scrollbar-color: var(--secondary) transparent;
        }

        .scrollbar::-webkit-scrollbar {
            width: 8px;
        }

        .scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }

        .scrollbar::-webkit-scrollbar-thumb {
            background: var(--secondary);
            border-radius: 4px;
        }

        .scrollbar::-webkit-scrollbar-thumb:hover {
            background: var(--accent);
        }

        /* ============ LOADING STATES ============ */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
            animation: shimmer 2s infinite;
        }

        .light-mode .loading::after {
            background: linear-gradient(90deg, transparent, rgba(0,0,0,0.05), transparent);
        }

        /* ============ DRAG & DROP FEEDBACK ============ */
        .drag-over {
            border: 2px dashed var(--secondary) !important;
            background: rgba(0, 243, 255, 0.05) !important;
        }

        .light-mode .drag-over {
            border: 2px dashed var(--accent) !important;
            background: rgba(123, 0, 255, 0.05) !important;
        }

        .drop-ready {
            border-color: var(--success) !important;
        }

        /* ============ ANIMATION CLASSES ============ */
        .slide-in {
            animation: slideInFromLeft 0.5s ease-out;
        }

        .slide-up {
            animation: slideInFromBottom 0.5s ease-out;
        }

        .fade-up {
            animation: fadeIn 0.5s ease-out, slideInFromBottom 0.5s ease-out;
        }
    </style>
</head>
<body class="scrollbar">
    <!-- Overlay de connexion Admin -->
    <div class="admin-overlay" id="adminOverlay">
        <div class="admin-login">
            <h2><i class="fas fa-lock"></i> Acc√®s Administrateur</h2>
            <input type="password" class="password-input" id="adminPassword" placeholder="Mot de passe administrateur">
            <div class="password-actions">
                <button class="btn btn-primary" onclick="loginAdmin()">
                    <i class="fas fa-sign-in-alt"></i> Se connecter
                </button>
                <button class="btn btn-secondary" onclick="closeAdmin()">
                    <i class="fas fa-times"></i> Annuler
                </button>
            </div>
            <div style="margin-top: 1rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                <i class="fas fa-info-circle"></i> Mot de passe actuel : admin123
            </div>
        </div>
    </div>

    <!-- Header Principal -->
    <header class="main-header fade-in">
        <div class="nav-container">
            <a href="#" class="logo">
                <i class="fas fa-robot"></i>
                LB-K SMART
            </a>
            
            <button class="hamburger" id="hamburger">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>
    </header>

    <!-- Menu Drawer -->
    <nav class="drawer-menu" id="drawerMenu">
        <div class="drawer-content">
            <div class="drawer-section">
                <h3><i class="fas fa-cog"></i> Administration</h3>
                <div class="drawer-grid">
                    <div class="drawer-item" onclick="openMiniPanel()">
                        <h4><i class="fas fa-sliders-h"></i> Mini Panneau Touch</h4>
                        <p>Interface tactile de configuration avanc√©e</p>
                    </div>
                    <div class="drawer-item" onclick="openEmployeePanel()">
                        <h4><i class="fas fa-users"></i> Gestion Employ√©s</h4>
                        <p>G√©rer les acc√®s et permissions</p>
                    </div>
                    <div class="drawer-item" onclick="openTechTerminal()">
                        <h4><i class="fas fa-terminal"></i> Terminal Tech</h4>
                        <p>Acc√®s d√©veloppeur HTML/CSS/JS/JSON</p>
                    </div>
                    <div class="drawer-item" onclick="openSettings()">
                        <h4><i class="fas fa-wrench"></i> Param√®tres Syst√®me</h4>
                        <p>Configuration globale de la plateforme</p>
                    </div>
                    <div class="drawer-item" onclick="toggleTheme()">
                        <h4><i class="fas fa-moon"></i> Mode Clair/Sombre</h4>
                        <p>Basculer entre les th√®mes</p>
                    </div>
                    <div class="drawer-item" onclick="changeAdminPassword()">
                        <h4><i class="fas fa-key"></i> Changer Mot de Passe</h4>
                        <p>Modifier le mot de passe admin</p>
                    </div>
                </div>
            </div>

            <div class="drawer-section">
                <h3><i class="fas fa-store"></i> Boutiques</h3>
                <div class="drawer-grid">
                    <div class="drawer-item" onclick="scrollToSection('betty-section')">
                        <h4><i class="fas fa-female"></i> Betty Kabey Smart</h4>
                        <p>Mode, cosm√©tiques, produits m√©nagers</p>
                    </div>
                    <div class="drawer-item" onclick="scrollToSection('laurent-section')">
                        <h4><i class="fas fa-male"></i> Laurent Kabesha Smart</h4>
                        <p>√âlectronique, automobile, pharmaceutique</p>
                    </div>
                    <div class="drawer-item" onclick="toggleTaskbar()">
                        <h4><i class="fas fa-list"></i> Catalogue Complet</h4>
                        <p>Voir tous les produits en un seul endroit</p>
                    </div>
                </div>
            </div>

            <div class="drawer-section">
                <h3><i class="fas fa-shopping-cart"></i> Panier & Commandes</h3>
                <div class="drawer-grid">
                    <div class="drawer-item" onclick="openCart()">
                        <h4><i class="fas fa-shopping-bag"></i> Voir le panier</h4>
                        <p>G√©rer vos produits s√©lectionn√©s</p>
                    </div>
                    <div class="drawer-item" onclick="openWhatsAppPanel()">
                        <h4><i class="fab fa-whatsapp"></i> Commander via WhatsApp</h4>
                        <p>Envoyer directement sur WhatsApp Business</p>
                    </div>
                    <div class="drawer-item" onclick="openAIChat()">
                        <h4><i class="fas fa-robot"></i> Assistant IA</h4>
                        <p>Service client intelligent 24/7</p>
                    </div>
                </div>
            </div>

            <div class="drawer-section">
                <h3><i class="fas fa-chart-line"></i> Statistiques</h3>
                <div class="drawer-grid">
                    <div class="drawer-item" onclick="showStats()">
                        <h4><i class="fas fa-users"></i> Visiteurs</h4>
                        <p><span id="visitorCountDrawer">0</span> visiteurs aujourd'hui</p>
                    </div>
                    <div class="drawer-item" onclick="showStats()">
                        <h4><i class="fas fa-newspaper"></i> Abonn√©s Newsletter</h4>
                        <p><span id="subscriberCountDrawer">0</span> abonn√©s</p>
                    </div>
                    <div class="drawer-item" onclick="showStats()">
                        <h4><i class="fas fa-shopping-cart"></i> Commandes</h4>
                        <p><span id="orderCountDrawer">0</span> commandes aujourd'hui</p>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Compteur de visiteurs -->
    <div class="visitor-counter">
        <i class="fas fa-users"></i>
        <span class="visitor-count" id="visitorCount">0</span> visiteurs
    </div>

    <!-- Toggle d'affichage -->
    <div class="display-toggle">
        <button class="display-btn active" onclick="setDisplayMode('mobile')" data-mode="mobile">
            <i class="fas fa-mobile-alt"></i>
        </button>
        <button class="display-btn" onclick="setDisplayMode('desktop')" data-mode="desktop">
            <i class="fas fa-desktop"></i>
        </button>
    </div>

    <!-- Boutons flottants -->
    <div class="floating-buttons-container" id="floatingButtonsContainer">
        <!-- Les boutons flottants seront g√©n√©r√©s dynamiquement -->
    </div>

    <!-- Contenu principal -->
    <main class="catalog-container">
        <!-- Section Betty Kabey Smart -->
        <section id="betty-section" class="boutique-section slide-in">
            <h2 class="boutique-title">
                <i class="fas fa-female"></i>
                Betty Kabey Smart
                <span style="font-size: 1rem; color: var(--accent);">(Mode & Beaut√©)</span>
            </h2>
            
            <div class="product-management">
                <div class="product-actions">
                    <button class="action-btn" onclick="addProduct('betty')">
                        <i class="fas fa-plus"></i> Ajouter produit
                    </button>
                    <button class="action-btn" onclick="importImages('betty')">
                        <i class="fas fa-image"></i> Importer images
                    </button>
                    <button class="action-btn" onclick="organizeProducts('betty')">
                        <i class="fas fa-arrows-alt"></i> Organiser
                    </button>
                    <button class="action-btn" onclick="toggleViewMode('betty')">
                        <i class="fas fa-th"></i> Changer vue
                    </button>
                </div>
                
                <div style="display: flex; gap: 1rem;">
                    <span style="color: var(--success); display: flex; align-items: center; gap: 5px;">
                        <i class="fas fa-check-circle"></i> En stock (<span id="bettyStockCount">2</span>)
                    </span>
                    <span style="color: var(--warning); display: flex; align-items: center; gap: 5px;">
                        <i class="fas fa-clock"></i> Sur commande (<span id="bettyOrderCount">1</span>)
                    </span>
                </div>
            </div>

            <div class="products-grid" id="bettyProducts" data-view-mode="grid">
                <!-- Les produits seront charg√©s dynamiquement -->
            </div>
        </section>

        <!-- Section Laurent Kabesha Smart -->
        <section id="laurent-section" class="boutique-section slide-in">
            <h2 class="boutique-title">
                <i class="fas fa-male"></i>
                Laurent Kabesha Smart
                <span style="font-size: 1rem; color: var(--accent);">(Technologie & Professionnel)</span>
            </h2>
            
            <div class="product-management">
                <div class="product-actions">
                    <button class="action-btn" onclick="addProduct('laurent')">
                        <i class="fas fa-plus"></i> Ajouter produit
                    </button>
                    <button class="action-btn" onclick="importImages('laurent')">
                        <i class="fas fa-image"></i> Importer images
                    </button>
                    <button class="action-btn" onclick="organizeProducts('laurent')">
                        <i class="fas fa-arrows-alt"></i> Organiser
                    </button>
                    <button class="action-btn" onclick="toggleViewMode('laurent')">
                        <i class="fas fa-th"></i> Changer vue
                    </button>
                </div>
                
                <div style="display: flex; gap: 1rem;">
                    <span style="color: var(--success); display: flex; align-items: center; gap: 5px;">
                        <i class="fas fa-check-circle"></i> En stock (<span id="laurentStockCount">2</span>)
                    </span>
                    <span style="color: var(--warning); display: flex; align-items: center; gap: 5px;">
                        <i class="fas fa-clock"></i> Sur commande (<span id="laurentOrderCount">1</span>)
                    </span>
                </div>
            </div>

            <div class="products-grid" id="laurentProducts" data-view-mode="grid">
                <!-- Les produits seront charg√©s dynamiquement -->
            </div>
        </section>
    </main>

    <!-- Barre de t√¢ches basse -->
    <div class="bottom-taskbar scrollbar" id="bottomTaskbar">
        <div class="taskbar-header">
            <h3 class="taskbar-title">
                <i class="fas fa-bars"></i>
                Catalogue Complet
                <span style="color: var(--warning); font-size: 0.9rem;">
                    (Priorit√© aux produits sur commande)
                </span>
            </h3>
            <button class="taskbar-close" onclick="toggleTaskbar()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="taskbar-products" id="taskbarProducts">
            <!-- Les produits seront charg√©s dynamiquement -->
        </div>
    </div>

    <!-- Panneau du panier -->
    <div class="cart-panel scrollbar" id="cartPanel">
        <div class="cart-header">
            <h3 class="cart-title">
                <i class="fas fa-shopping-cart"></i>
                Votre Panier
            </h3>
            <button class="taskbar-close" onclick="closeCart()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="cart-items" id="cartItems">
            <!-- Les articles du panier seront charg√©s dynamiquement -->
            <div class="cart-empty" id="cartEmpty">
                <i class="fas fa-shopping-cart" style="font-size: 3rem; opacity: 0.3;"></i>
                <p style="margin-top: 1rem;">Votre panier est vide</p>
            </div>
        </div>
        
        <div class="cart-total" id="cartTotal" style="display: none;">
            <div class="total-label">Total √† payer</div>
            <div class="total-amount">0$</div>
            <button class="btn btn-primary" style="margin-top: 1rem; width: 100%;" onclick="sendToWhatsApp()">
                <i class="fab fa-whatsapp"></i> Envoyer commande sur WhatsApp
            </button>
            <button class="btn btn-secondary" style="margin-top: 0.5rem; width: 100%;" onclick="clearCart()">
                <i class="fas fa-trash"></i> Vider le panier
            </button>
        </div>
    </div>

    <!-- Panneau IA Chat -->
    <div class="ai-chat-panel" id="aiChatPanel">
        <div class="ai-header">
            <h3 class="ai-title">
                <i class="fas fa-robot"></i>
                Assistant LB-K SMART
            </h3>
            <div class="ai-status">
                <span class="status-dot"></span>
                <span>Disponible 24/7</span>
            </div>
        </div>
        
        <div class="ai-messages scrollbar" id="aiMessages">
            <div class="message ai">
                <p>Bonjour ! Je suis l'assistant IA de LB-K SMART. üëã</p>
                <p>Je peux vous aider avec :</p>
                <ul style="margin-left: 1rem;">
                    <li>Informations sur les produits</li>
                    <li>Tarifs et disponibilit√©s</li>
                    <li>M√©thodes de paiement</li>
                    <li>D√©lais de livraison</li>
                    <li>Suggestions personnalis√©es</li>
                </ul>
                <p>Comment puis-je vous aider aujourd'hui ?</p>
            </div>
        </div>
        
        <div class="ai-input-container">
            <textarea class="ai-input" id="aiInput" placeholder="Posez votre question ici... (Appuyez sur Entr√©e pour envoyer)"></textarea>
        </div>
    </div>

    <!-- Panneau WhatsApp Business -->
    <div class="whatsapp-panel" id="whatsappPanel">
        <div class="whatsapp-header">
            <h3 style="font-size: 1rem;"><i class="fab fa-whatsapp"></i> WhatsApp Business</h3>
            <button class="taskbar-close" onclick="closeWhatsAppPanel()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="whatsapp-boutique">
            <div class="boutique-number" onclick="contactWhatsApp('betty')">
                <strong>Betty Kabey Smart</strong>
                <div style="margin-top: 5px;">+243 97 145 5335</div>
                <small style="display: block; margin-top: 5px; font-size: 0.8rem;">Mode, cosm√©tiques, produits m√©nagers</small>
            </div>
            <div class="boutique-number" onclick="contactWhatsApp('laurent')">
                <strong>Laurent Kabesha Smart</strong>
                <div style="margin-top: 5px;">+243 82 293 7321</div>
                <small style="display: block; margin-top: 5px; font-size: 0.8rem;">√âlectronique, automobile, pharmaceutique</small>
            </div>
        </div>
        
        <div style="padding: 1rem; background: rgba(255,255,255,0.1);">
            <button class="btn btn-primary" style="width: 100%;" onclick="sendCartToWhatsApp()">
                <i class="fas fa-shopping-cart"></i> Envoyer le panier actuel
            </button>
        </div>
    </div>

    <!-- Mini Panneau Admin Touch Screen -->
    <div class="admin-mini-panel" id="adminMiniPanel">
        <div class="admin-mini-header">
            <h2 class="admin-mini-title">
                <i class="fas fa-sliders-h"></i>
                Mini Panneau Admin - Touch Screen
            </h2>
            <button class="taskbar-close" onclick="closeMiniPanel()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="touch-buttons-grid" id="touchButtons">
            <!-- Les boutons seront g√©n√©r√©s dynamiquement -->
        </div>
        
        <div class="movement-controls">
            <h4><i class="fas fa-arrows-alt"></i> Gestionnaire de Mouvement</h4>
            <div class="movement-options">
                <div class="movement-option active" data-movement="none" onclick="setMovement('none')">
                    <i class="fas fa-ban"></i>
                    <div>Aucun</div>
                </div>
                <div class="movement-option" data-movement="style" onclick="setMovement('style')">
                    <i class="fas fa-palette"></i>
                    <div>Style</div>
                </div>
                <div class="movement-option" data-movement="direction" onclick="setMovement('direction')">
                    <i class="fas fa-arrows-alt"></i>
                    <div>Direction</div>
                </div>
                <div class="movement-option" data-movement="rotation" onclick="setMovement('rotation')">
                    <i class="fas fa-sync"></i>
                    <div>Rotation</div>
                </div>
            </div>
            
            <div class="direction-controls" id="directionControls" style="display: none;">
                <h5 style="margin-top: 1rem; color: var(--secondary);">Directions disponibles :</h5>
                <div style="display: flex; gap: 1rem; margin-top: 0.5rem; flex-wrap: wrap;">
                    <button class="btn btn-secondary" onclick="setDirection('vertical')">Haut ‚Üî Bas</button>
                    <button class="btn btn-secondary" onclick="setDirection('horizontal')">Gauche ‚Üî Droite</button>
                    <button class="btn btn-secondary" onclick="setDirection('rotate')">Rotation</button>
                    <button class="btn btn-secondary" onclick="setDirection('slide')">Coulissage</button>
                </div>
            </div>
            
            <div id="styleControls" style="display: none; margin-top: 1rem;">
                <h5 style="color: var(--secondary);">Options de style :</h5>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-top: 0.5rem;">
                    <input type="color" id="colorPicker" style="width: 100%; height: 40px; border: none; border-radius: var(--radius);">
                    <input type="range" id="sizeSlider" min="20" max="100" value="60" style="width: 100%;">
                    <input type="range" id="opacitySlider" min="0" max="100" value="100" style="width: 100%;">
                    <input type="text" id="iconInput" placeholder="Nom d'ic√¥ne (ex: fa-robot)" style="width: 100%; padding: 0.5rem; border-radius: var(--radius); border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: white;">
                </div>
            </div>
        </div>
        
        <div class="live-preview">
            <h4><i class="fas fa-eye"></i> Pr√©visualisation Live</h4>
            <p>Les modifications s'appliquent en temps r√©el sur le bureau principal.</p>
            <div id="buttonPreview" style="margin-top: 1rem; display: flex; justify-content: center;">
                <button class="floating-button" id="previewButton" style="width: 80px; height: 80px; font-size: 2rem;">
                    <i class="fas fa-robot"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Terminal Tech -->
    <div class="tech-terminal" id="techTerminal">
        <div class="terminal-header">
            <span><i class="fas fa-terminal"></i> Terminal Tech - LB-K SMART</span>
            <button class="taskbar-close" onclick="closeTechTerminal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="terminal-body scrollbar" id="terminalOutput">
LB-K SMART Terminal v1.0
Type 'help' pour voir les commandes disponibles
<br>
&gt; <span id="terminalPrompt"></span>
        </div>
        <input type="text" class="terminal-input" id="terminalInput" placeholder="Entrez une commande..." style="display: none;">
    </div>

    <!-- Panel Gestion Employ√©s -->
    <div class="employee-panel" id="employeePanel">
        <div class="admin-mini-header">
            <h2 class="admin-mini-title">
                <i class="fas fa-users"></i>
                Gestion des Employ√©s
            </h2>
            <button class="taskbar-close" onclick="closeEmployeePanel()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="employee-list scrollbar" id="employeeList">
            <!-- La liste des employ√©s sera charg√©e dynamiquement -->
        </div>
        
        <div style="display: flex; gap: 1rem; margin-top: 1rem;">
            <button class="btn btn-primary" onclick="addEmployee()" style="flex: 1;">
                <i class="fas fa-user-plus"></i> Ajouter un employ√©
            </button>
            <button class="btn btn-secondary" onclick="importEmployees()" style="flex: 1;">
                <i class="fas fa-file-import"></i> Importer CSV
            </button>
        </div>
    </div>

    <!-- Panel Param√®tres Syst√®me -->
    <div class="settings-panel" id="settingsPanel">
        <div class="admin-mini-header">
            <h2 class="admin-mini-title">
                <i class="fas fa-wrench"></i>
                Param√®tres Syst√®me
            </h2>
            <button class="taskbar-close" onclick="closeSettings()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="settings-category">
            <h4><i class="fas fa-palette"></i> Apparence</h4>
            <div class="setting-item">
                <div class="setting-label">Mode clair/sombre</div>
                <div class="setting-control">
                    <label class="toggle-switch">
                        <input type="checkbox" id="themeToggle" onchange="toggleThemeSetting()">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            <div class="setting-item">
                <div class="setting-label">Animations</div>
                <div class="setting-control">
                    <label class="toggle-switch">
                        <input type="checkbox" id="animationsToggle" checked onchange="toggleAnimations()">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            <div class="setting-item">
                <div class="setting-label">Taille des polices</div>
                <div class="setting-control">
                    <select id="fontSizeSelect" onchange="changeFontSize()" style="padding: 0.5rem; border-radius: var(--radius); background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
                        <option value="small">Petite</option>
                        <option value="medium" selected>Moyenne</option>
                        <option value="large">Grande</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="settings-category">
            <h4><i class="fas fa-shopping-cart"></i> Panier & Commandes</h4>
            <div class="setting-item">
                <div class="setting-label">Confirmation avant suppression</div>
                <div class="setting-control">
                    <label class="toggle-switch">
                        <input type="checkbox" id="confirmDeleteToggle" checked onchange="toggleConfirmDelete()">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            <div class="setting-item">
                <div class="setting-label">Notifications sonores</div>
                <div class="setting-control">
                    <label class="toggle-switch">
                        <input type="checkbox" id="soundToggle" onchange="toggleSounds()">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            <div class="setting-item">
                <div class="setting-label">Auto-sauvegarde panier</div>
                <div class="setting-control">
                    <label class="toggle-switch">
                        <input type="checkbox" id="autoSaveToggle" checked onchange="toggleAutoSave()">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </div>
        
        <div class="settings-category">
            <h4><i class="fas fa-database"></i> Donn√©es & Sauvegarde</h4>
            <div class="setting-item">
                <div class="setting-label">Sauvegarde automatique</div>
                <div class="setting-control">
                    <select id="backupInterval" onchange="changeBackupInterval()" style="padding: 0.5rem; border-radius: var(--radius); background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
                        <option value="hourly">Chaque heure</option>
                        <option value="daily" selected>Quotidienne</option>
                        <option value="weekly">Hebdomadaire</option>
                        <option value="manual">Manuelle</option>
                    </select>
                </div>
            </div>
            <div class="setting-item">
                <button class="btn btn-primary" onclick="backupNow()" style="width: 100%;">
                    <i class="fas fa-save"></i> Sauvegarder maintenant
                </button>
            </div>
            <div class="setting-item">
                <button class="btn btn-secondary" onclick="restoreBackup()" style="width: 100%;">
                    <i class="fas fa-history"></i> Restaurer sauvegarde
                </button>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
            <button class="btn btn-primary" onclick="saveSettings()" style="margin-right: 1rem;">
                <i class="fas fa-save"></i> Sauvegarder
            </button>
            <button class="btn btn-secondary" onclick="resetSettings()">
                <i class="fas fa-undo"></i> R√©initialiser
            </button>
        </div>
    </div>

    <!-- Barre Newsletter -->
    <div class="newsletter-bar" id="newsletterBar">
        <div class="newsletter-content">
            <div class="newsletter-text">
                üì∞ Restez inform√© ! Abonnez-vous √† notre newsletter
            </div>
            
            <div class="newsletter-form">
                <input type="email" class="newsletter-input" id="newsletterEmail" placeholder="Votre email">
                <button class="btn btn-primary" onclick="subscribeNewsletter()">
                    S'abonner
                </button>
            </div>
            
            <div class="subscriber-count">
                <i class="fas fa-users"></i>
                <span class="count-number" id="subscriberCount">0</span> abonn√©s
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <script>
        // ============ CONFIGURATION INITIALE ============
        // Configuration Toastr
        toastr.options = {
            "closeButton": true,
            "progressBar": true,
            "positionClass": "toast-top-right",
            "timeOut": "5000",
            "extendedTimeOut": "2000"
        };

        // ============ √âTAT GLOBAL ============
        const state = {
            // Gouvernance & Admin
            isAdmin: false,
            adminPassword: "admin123",
            
            // Interface & UX
            theme: 'dark',
            animationsEnabled: true,
            fontSize: 'medium',
            confirmDelete: true,
            soundsEnabled: false,
            autoSaveCart: true,
            
            // Affichage
            displayMode: 'mobile',
            
            // Donn√©es commerciales
            cart: [],
            visitors: Math.floor(Math.random() * 100) + 50,
            subscribers: 125,
            ordersToday: Math.floor(Math.random() * 20) + 5,
            
            // Employ√©s
            employees: [
                { id: 1, name: 'Admin Principal', email: 'admin@lbk-smart.com', permissions: ['admin'], active: true },
                { id: 2, name: 'Betty Kabey', email: 'betty@lbk-smart.com', permissions: ['read', 'write', 'modify'], active: true },
                { id: 3, name: 'Laurent Kabesha', email: 'laurent@lbk-smart.com', permissions: ['read', 'write', 'modify'], active: true },
                { id: 4, name: 'Employ√© Vente', email: 'vente@lbk-smart.com', permissions: ['read', 'modify'], active: true }
            ],
            
            // Produits
            products: {
                betty: [],
                laurent: []
            },
            
            // Boutons flottants
            floatingButtons: [
                { id: 'whatsapp', icon: 'fab fa-whatsapp', label: 'WhatsApp Business', active: true, position: 0, color: '#25D366', size: 60, opacity: 100, animation: 'pulse' },
                { id: 'ai', icon: 'fas fa-robot', label: 'Assistant IA 24/7', active: true, position: 1, color: '#7b00ff', size: 60, opacity: 100, animation: 'pulse' },
                { id: 'cart', icon: 'fas fa-shopping-cart', label: 'Panier', active: true, position: 2, color: '#00ff9d', size: 60, opacity: 100, animation: 'bounce' },
                { id: 'display-mode', icon: 'fas fa-bars', label: 'Barre de t√¢ches', active: true, position: 3, color: '#ffcc00', size: 60, opacity: 100, animation: 'none' },
                { id: 'admin-panel', icon: 'fas fa-cog', label: 'Panneau Admin', active: true, position: 4, color: '#ff0066', size: 60, opacity: 100, animation: 'glow' },
                { id: 'theme-toggle', icon: 'fas fa-moon', label: 'Mode Clair/Sombre', active: true, position: 5, color: '#667eea', size: 60, opacity: 100, animation: 'none' }
            ],
            
            // Mini Panneau Touch
            currentMovement: 'none',
            currentDirection: 'vertical',
            
            // Backup
            lastBackup: null,
            backupInterval: 'daily',
            
            // Terminal
            terminalHistory: [],
            terminalIndex: 0
        };

        // ============ INITIALISATION ============
        document.addEventListener('DOMContentLoaded', function() {
            // Initialiser AOS
            AOS.init({
                duration: 800,
                once: true
            });
            
            // Charger les donn√©es
            loadInitialData();
            
            // Initialiser les √©v√©nements
            initEvents();
            
            // Initialiser l'interface
            initInterface();
            
            // Initialiser les boutons flottants
            initFloatingButtons();
            
            // Initialiser les produits
            initProducts();
            
            // Afficher la newsletter apr√®s 5 secondes
            setTimeout(() => {
                const newsletterHidden = localStorage.getItem('newsletterHidden');
                if (!newsletterHidden || Date.now() - parseInt(newsletterHidden) > 7 * 24 * 60 * 60 * 1000) {
                    document.getElementById('newsletterBar').classList.add('active');
                }
            }, 5000);
            
            // Mettre √† jour les compteurs
            updateCounters();
            
            toastr.success('LB-K SMART pr√™t √† fonctionner !', 'Bienvenue');
            
            // Sauvegarder l'√©tat initial
            saveState();
        });

        // ============ FONCTIONS D'INITIALISATION ============
        function loadInitialData() {
            // Donn√©es des produits Betty
            state.products.betty = [
                { 
                    id: 1, 
                    name: 'T-shirt √©l√©gant', 
                    price: 25, 
                    status: 'stock', 
                    boutique: 'betty',
                    quantity: 50,
                    sizes: ['S', 'M', 'L', 'XL'],
                    description: 'T-shirt en coton de haute qualit√©',
                    image: null
                },
                { 
                    id: 2, 
                    name: 'Cr√®me hydratante', 
                    price: 18, 
                    status: 'order', 
                    boutique: 'betty',
                    quantity: 20,
                    sizes: [],
                    description: 'Cr√®me hydratante pour tous types de peau',
                    image: null
                },
                { 
                    id: 3, 
                    name: 'Robe d\'√©t√©', 
                    price: 45, 
                    status: 'stock', 
                    boutique: 'betty',
                    quantity: 15,
                    sizes: ['S', 'M', 'L'],
                    description: 'Robe l√©g√®re pour l\'√©t√©',
                    image: null
                },
                { 
                    id: 4, 
                    name: 'Sac √† main', 
                    price: 60, 
                    status: 'stock', 
                    boutique: 'betty',
                    quantity: 8,
                    sizes: [],
                    description: 'Sac √† main en cuir v√©ritable',
                    image: null
                }
            ];
            
            // Donn√©es des produits Laurent
            state.products.laurent = [
                { 
                    id: 5, 
                    name: '√âcouteurs Bluetooth', 
                    price: 45, 
                    status: 'stock', 
                    boutique: 'laurent',
                    quantity: 30,
                    sizes: [],
                    description: '√âcouteurs sans fil avec r√©duction de bruit',
                    image: null
                },
                { 
                    id: 6, 
                    name: 'Produits pharmaceutiques', 
                    price: 30, 
                    status: 'order', 
                    boutique: 'laurent',
                    quantity: 0,
                    sizes: [],
                    description: 'Produits pharmaceutiques sur commande',
                    image: null
                },
                { 
                    id: 7, 
                    name: 'Batterie voiture', 
                    price: 120, 
                    status: 'stock', 
                    boutique: 'laurent',
                    quantity: 5,
                    sizes: [],
                    description: 'Batterie 12V pour voiture',
                    image: null
                },
                { 
                    id: 8, 
                    name: 'Smartphone', 
                    price: 350, 
                    status: 'order', 
                    boutique: 'laurent',
                    quantity: 0,
                    sizes: [],
                    description: 'Smartphone dernier mod√®le',
                    image: null
                }
            ];
            
            // Charger le panier depuis le localStorage
            const savedCart = localStorage.getItem('lbkCart');
            if (savedCart) {
                try {
                    state.cart = JSON.parse(savedCart);
                    updateCartUI();
                } catch (e) {
                    console.error('Erreur chargement panier:', e);
                }
            }
            
            // Charger les param√®tres
            loadSettings();
        }

        function initInterface() {
            // Mettre √† jour les compteurs dans le drawer
            document.getElementById('visitorCountDrawer').textContent = state.visitors;
            document.getElementById('subscriberCountDrawer').textContent = state.subscribers;
            document.getElementById('orderCountDrawer').textContent = state.ordersToday;
            
            // Mettre √† jour les compteurs de produits
            updateProductCounts();
            
            // Appliquer le th√®me
            if (state.theme === 'light') {
                document.body.classList.add('light-mode');
                document.getElementById('themeToggle').checked = true;
            }
            
            // Appliquer la taille de police
            document.getElementById('fontSizeSelect').value = state.fontSize;
            changeFontSize();
            
            // Initialiser les compteurs UI
            document.getElementById('visitorCount').textContent = state.visitors;
            document.getElementById('subscriberCount').textContent = state.subscribers;
        }

        function initFloatingButtons() {
            const container = document.getElementById('floatingButtonsContainer');
            container.innerHTML = '';
            
            // Trier les boutons par position
            state.floatingButtons
                .filter(btn => btn.active)
                .sort((a, b) => a.position - b.position)
                .forEach(button => {
                    const btn = document.createElement('button');
                    btn.className = `floating-button ${button.id}`;
                    btn.innerHTML = `
                        <i class="${button.icon}"></i>
                        <span class="button-tooltip">${button.label}</span>
                    `;
                    
                    // Appliquer le style
                    btn.style.width = `${button.size}px`;
                    btn.style.height = `${button.size}px`;
                    btn.style.fontSize = `${button.size * 0.025}rem`;
                    btn.style.opacity = `${button.opacity / 100}`;
                    btn.style.background = button.color;
                    
                    if (button.animation && button.animation !== 'none') {
                        btn.classList.add(button.animation);
                    }
                    
                    // Ajouter l'√©v√©nement onclick
                    switch(button.id) {
                        case 'whatsapp':
                            btn.onclick = openWhatsAppPanel;
                            break;
                        case 'ai':
                            btn.onclick = openAIChat;
                            break;
                        case 'cart':
                            btn.onclick = openCart;
                            break;
                        case 'display-mode':
                            btn.onclick = toggleTaskbar;
                            break;
                        case 'admin-panel':
                            btn.onclick = openAdminPanel;
                            break;
                        case 'theme-toggle':
                            btn.onclick = toggleTheme;
                            break;
                    }
                    
                    container.appendChild(btn);
                });
            
            // Initialiser le drag & drop pour les boutons
            initButtonDragAndDrop();
        }

        function initProducts() {
            renderProducts('betty');
            renderProducts('laurent');
            updateTaskbarProducts();
        }

        function initEvents() {
            // Menu hamburger
            const hamburger = document.getElementById('hamburger');
            const drawerMenu = document.getElementById('drawerMenu');
            
            hamburger.addEventListener('click', function(e) {
                e.stopPropagation();
                this.classList.toggle('active');
                drawerMenu.classList.toggle('active');
            });

            // Fermer le drawer en cliquant √† l'ext√©rieur
            document.addEventListener('click', function(e) {
                if (!drawerMenu.contains(e.target) && !hamburger.contains(e.target)) {
                    hamburger.classList.remove('active');
                    drawerMenu.classList.remove('active');
                }
            });

            // Fermer les panneaux en appuyant sur ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeAllPanels();
                }
            });

            // Input IA
            const aiInput = document.getElementById('aiInput');
            aiInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendAIMessage();
                }
            });

            // Input terminal
            const terminalInput = document.getElementById('terminalInput');
            terminalInput.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    navigateTerminalHistory(-1);
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    navigateTerminalHistory(1);
                }
            });
            
            terminalInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    executeTerminalCommand(this.value);
                    this.value = '';
                }
            });

            // Newsletter input
            const newsletterInput = document.getElementById('newsletterEmail');
            newsletterInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    subscribeNewsletter();
                }
            });

            // Sauvegarder l'√©tat avant de quitter
            window.addEventListener('beforeunload', function() {
                saveState();
            });

            // Initialiser le drag & drop pour les produits
            initDragAndDrop();
        }

        // ============ GESTION ADMIN ============
        function openAdminPanel() {
            document.getElementById('adminOverlay').classList.add('active');
            document.getElementById('adminPassword').focus();
        }

        function closeAdmin() {
            document.getElementById('adminOverlay').classList.remove('active');
            document.getElementById('adminPassword').value = '';
        }

        function loginAdmin() {
            const password = document.getElementById('adminPassword').value;
            if (password === state.adminPassword) {
                state.isAdmin = true;
                toastr.success('Acc√®s admin accord√© !');
                closeAdmin();
                
                // Activer les fonctionnalit√©s admin
                enableAdminFeatures();
            } else {
                toastr.error('Mot de passe incorrect !');
            }
        }

        function changeAdminPassword() {
            if (!state.isAdmin) {
                toastr.error('Acc√®s admin requis');
                openAdminPanel();
                return;
            }
            
            const oldPass = prompt('Ancien mot de passe :');
            if (oldPass !== state.adminPassword) {
                toastr.error('Mot de passe incorrect !');
                return;
            }
            
            const newPass = prompt('Nouveau mot de passe :');
            if (!newPass || newPass.length < 4) {
                toastr.error('Le mot de passe doit avoir au moins 4 caract√®res');
                return;
            }
            
            const confirmPass = prompt('Confirmer le nouveau mot de passe :');
            if (newPass !== confirmPass) {
                toastr.error('Les mots de passe ne correspondent pas');
                return;
            }
            
            state.adminPassword = newPass;
            toastr.success('Mot de passe chang√© avec succ√®s !');
            saveState();
        }

        function enableAdminFeatures() {
            // Rendre visibles les boutons admin
            const adminButtons = document.querySelectorAll('[onclick*="openAdminPanel"], [onclick*="openMiniPanel"], [onclick*="openTechTerminal"], [onclick*="openEmployeePanel"]');
            adminButtons.forEach(btn => {
                btn.style.display = 'flex';
            });
            
            // Activer les fonctionnalit√©s d'√©dition
            document.querySelectorAll('.action-btn').forEach(btn => {
                btn.style.pointerEvents = 'auto';
                btn.style.opacity = '1';
            });
            
            // Afficher les boutons d'√©dition sur les produits
            document.querySelectorAll('.product-btn').forEach(btn => {
                btn.style.display = 'flex';
            });
        }

        // ============ NAVIGATION & MENUS ============
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
                closeDrawer();
            }
        }

        function closeDrawer() {
            document.getElementById('hamburger').classList.remove('active');
            document.getElementById('drawerMenu').classList.remove('active');
        }

        function closeAllPanels() {
            // Fermer tous les panneaux
            document.querySelectorAll('.cart-panel.active, .ai-chat-panel.active, .whatsapp-panel.active, .bottom-taskbar.active, .admin-mini-panel.active, .tech-terminal.active, .employee-panel.active, .settings-panel.active').forEach(panel => {
                panel.classList.remove('active');
            });
            closeDrawer();
        }

        // ============ MODES D'AFFICHAGE ============
        function setDisplayMode(mode) {
            state.displayMode = mode;
            
            // Mettre √† jour les boutons
            document.querySelectorAll('.display-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.mode === mode) {
                    btn.classList.add('active');
                }
            });
            
            // Appliquer les changements
            if (mode === 'mobile') {
                document.body.classList.add('mobile-mode');
                toastr.info('Mode mobile activ√©');
            } else {
                document.body.classList.remove('mobile-mode');
                toastr.info('Mode bureau activ√©');
            }
            
            saveState();
        }

        // ============ TH√àME CLAIR/SOMBRE ============
        function toggleTheme() {
            if (state.theme === 'dark') {
                state.theme = 'light';
                document.body.classList.add('light-mode');
                toastr.info('Mode clair activ√©');
            } else {
                state.theme = 'dark';
                document.body.classList.remove('light-mode');
                toastr.info('Mode sombre activ√©');
            }
            saveState();
        }

        function toggleThemeSetting() {
            const toggle = document.getElementById('themeToggle');
            if (toggle.checked) {
                state.theme = 'light';
                document.body.classList.add('light-mode');
            } else {
                state.theme = 'dark';
                document.body.classList.remove('light-mode');
            }
        }

        // ============ BARRE DE T√ÇCHES ============
        function toggleTaskbar() {
            const taskbar = document.getElementById('bottomTaskbar');
            taskbar.classList.toggle('active');
            
            if (taskbar.classList.contains('active')) {
                updateTaskbarProducts();
            }
        }

        function updateTaskbarProducts() {
            const container = document.getElementById('taskbarProducts');
            container.innerHTML = '';
            
            // Combiner tous les produits
            let allProducts = [
                ...state.products.betty.map(p => ({...p, boutiqueName: 'Betty Kabey Smart'})),
                ...state.products.laurent.map(p => ({...p, boutiqueName: 'Laurent Kabesha Smart'}))
            ];
            
            // Trier : produits sur commande d'abord, puis par boutique
            allProducts.sort((a, b) => {
                if (a.status === 'order' && b.status !== 'order') return -1;
                if (a.status !== 'order' && b.status === 'order') return 1;
                return a.boutiqueName.localeCompare(b.boutiqueName);
            });
            
            allProducts.forEach(product => {
                const div = document.createElement('div');
                div.className = 'taskbar-product';
                div.innerHTML = `
                    <div style="font-weight: 600; margin-bottom: 5px;">${product.name}</div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">${product.boutiqueName}</span>
                        <span style="color: var(--secondary); font-weight: 700;">${product.price}$</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span class="product-badge ${product.status === 'stock' ? 'stock' : ''}">
                            ${product.status === 'stock' ? 'En stock' : 'Sur commande'}
                        </span>
                        <button onclick="addToCartFromTaskbar(${product.id})" style="background: var(--gradient); color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">
                            <i class="fas fa-cart-plus"></i>
                        </button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // ============ GESTION PRODUITS ============
        function renderProducts(boutique) {
            const container = document.getElementById(`${boutique}Products`);
            const products = state.products[boutique];
            
            container.innerHTML = '';
            
            products.forEach(product => {
                const card = createProductCard(product, boutique);
                container.appendChild(card);
            });
            
            updateProductCounts();
        }

        function createProductCard(product, boutique) {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.dataset.id = product.id;
            card.dataset.status = product.status;
            card.draggable = true;
            
            const imageContent = product.image 
                ? `<img src="${product.image}" alt="${product.name}">`
                : `<i class="fas fa-${boutique === 'betty' ? 'tshirt' : 'headphones'}"></i>`;
            
            card.innerHTML = `
                <div class="product-image">
                    ${imageContent}
                    ${state.isAdmin ? `
                    <div class="upload-overlay">
                        <button class="upload-btn" onclick="uploadProductImage(${product.id}, '${boutique}')">
                            <i class="fas fa-upload"></i> Changer
                        </button>
                    </div>
                    ` : ''}
                </div>
                <div class="product-info">
                    <h3 class="product-name">${product.name}</h3>
                    <div class="product-price">${product.price}$</div>
                    <div class="product-quantity">
                        ${product.status === 'stock' ? `Quantit√©: ${product.quantity}` : 'Sur commande seulement'}
                        ${product.sizes && product.sizes.length > 0 ? ` | Tailles: ${product.sizes.join(', ')}` : ''}
                    </div>
                    ${product.description ? `<div style="color: rgba(255,255,255,0.6); font-size: 0.9rem; margin-bottom: 1rem;">${product.description}</div>` : ''}
                    <div class="product-actions-buttons">
                        ${state.isAdmin ? `
                        <button class="product-btn" onclick="editProduct(${product.id}, '${boutique}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        ` : ''}
                        <button class="product-btn" onclick="addToCart(${product.id}, '${boutique}')">
                            <i class="fas fa-cart-plus"></i>
                        </button>
                        ${state.isAdmin ? `
                        <button class="product-btn" onclick="toggleProductVisibility(${product.id}, '${boutique}')">
                            <i class="fas fa-eye-slash"></i>
                        </button>
                        ` : ''}
                    </div>
                </div>
            `;
            
            return card;
        }

        function addProduct(boutique) {
            if (!state.isAdmin) {
                toastr.error('Acc√®s admin requis');
                return;
            }
            
            const name = prompt('Nom du produit :');
            if (!name) return;
            
            const price = parseFloat(prompt('Prix ($) :'));
            if (isNaN(price) || price <= 0) {
                toastr.error('Prix invalide');
                return;
            }
            
            const description = prompt('Description (optionnel) :') || '';
            const quantity = parseInt(prompt('Quantit√© (0 pour sur commande) :')) || 0;
            
            const status = quantity > 0 ? 'stock' : 'order';
            
            const sizesInput = prompt('Tailles (s√©par√©es par des virgules, laisser vide si non applicable) :');
            const sizes = sizesInput ? sizesInput.split(',').map(s => s.trim()) : [];
            
            const newProduct = {
                id: Date.now(),
                name,
                price,
                description,
                quantity,
                sizes,
                status,
                boutique,
                image: null
            };
            
            state.products[boutique].push(newProduct);
            renderProducts(boutique);
            updateTaskbarProducts();
            toastr.success('Produit ajout√© !');
            saveState();
        }

        function editProduct(productId, boutique) {
            if (!state.isAdmin) {
                toastr.error('Acc√®s admin requis');
                return;
            }
            
            const productIndex = state.products[boutique].findIndex(p => p.id === productId);
            if (productIndex === -1) return;
            
            const product = state.products[boutique][productIndex];
            
            const name = prompt('Nouveau nom :', product.name);
            if (!name) return;
            
            const price = parseFloat(prompt('Nouveau prix ($) :', product.price));
            if (isNaN(price) || price <= 0) {
                toastr.error('Prix invalide');
                return;
            }
            
            const description = prompt('Nouvelle description :', product.description || '');
            const quantity = parseInt(prompt('Nouvelle quantit√© :', product.quantity)) || 0;
            
            const status = quantity > 0 ? 'stock' : 'order';
            
            const sizesInput = prompt('Nouvelles tailles (s√©par√©es par des virgules) :', product.sizes ? product.sizes.join(', ') : '');
            const sizes = sizesInput ? sizesInput.split(',').map(s => s.trim()) : [];
            
            // Mettre √† jour le produit
            state.products[boutique][productIndex] = {
                ...product,
                name,
                price,
                description,
                quantity,
                sizes,
                status
            };
            
            renderProducts(boutique);
            updateTaskbarProducts();
            toastr.success('Produit modifi√© !');
            saveState();
        }

        function toggleProductVisibility(productId, boutique) {
            if (!state.isAdmin) {
                toastr.error('Acc√®s admin requis');
                return;
            }
            
            const product = state.products[boutique].find(p => p.id === productId);
            if (!product) return;
            
            // Pour cet exemple, on va simplement masquer l'√©l√©ment visuellement
            // Dans une vraie application, vous auriez une propri√©t√© "hidden"
            const card = document.querySelector(`.product-card[data-id="${productId}"]`);
            if (card) {
                if (card.style.opacity === '0.5') {
                    card.style.opacity = '1';
                    card.style.pointerEvents = 'auto';
                    toastr.info('Produit affich√©');
                } else {
                    card.style.opacity = '0.5';
                    card.style.pointerEvents = 'none';
                    toastr.info('Produit masqu√©');
                }
            }
        }

        function uploadProductImage(productId, boutique) {
            if (!state.isAdmin) {
                toastr.error('Acc√®s admin requis');
                return;
            }
            
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                if (file.size > 5 * 1024 * 1024) { // 5MB limit
                    toastr.error('L\'image doit faire moins de 5MB');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const productIndex = state.products[boutique].findIndex(p => p.id === productId);
                    if (productIndex !== -1) {
                        state.products[boutique][productIndex].image = e.target.result;
                        renderProducts(boutique);
                        toastr.success('Image mise √† jour !');
                        saveState();
                    }
                };
                reader.readAsDataURL(file);
            };
            
            input.click();
        }

        function importImages(boutique) {
            if (!state.isAdmin) {
                toastr.error('Acc√®s admin requis');
                return;
            }
            
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.multiple = true;
            
            input.onchange = function(e) {
                const files = Array.from(e.target.files);
                let processed = 0;
                
                files.forEach((file, index) => {
                    if (file.size > 5 * 1024 * 1024) {
                        toastr.warning(`L'image ${file.name} est trop grande (max 5MB)`);
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        // Associer l'image au premier produit sans image
                        const productIndex = state.products[boutique].findIndex(p => !p.image);
                        if (productIndex !== -1) {
                            state.products[boutique][productIndex].image = e.target.result;
                        }
                        
                        processed++;
                        
                        if (processed === files.length) {
                            renderProducts(boutique);
                            toastr.success(`${files.length} image(s) import√©e(s)`);
                            saveState();
                        }
                    };
                    reader.readAsDataURL(file);
                });
            };
            
            input.click();
        }

        function organizeProducts(boutique) {
            if (!state.isAdmin) {
                toastr.error('Acc√®s admin requis');
                return;
            }
            
            const container = document.getElementById(`${boutique}Products`);
            const cards = container.querySelectorAll('.product-card');
            
            cards.forEach(card => {
                card.style.cursor = 'move';
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragover', handleDragOver);
                card.addEventListener('drop', handleDrop);
                card.addEventListener('dragend', handleDragEnd);
            });
            
            toastr.info('Mode organisation activ√© - Glissez-d√©posez les produits');
        }

        function initDragAndDrop() {
            let draggedItem = null;
            
            function handleDragStart(e) {
                draggedItem = this;
                this.classList.add('dragging');
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/plain', this.dataset.id);
            }
            
            function handleDragOver(e) {
                e.preventDefault();
                this.classList.add('drag-over');
            }
            
            function handleDragLeave() {
                this.classList.remove('drag-over');
            }
            
            function handleDrop(e) {
                e.preventDefault();
                this.classList.remove('drag-over');
                
                if (draggedItem && draggedItem !== this) {
                    const container = this.parentElement;
                    const draggedIndex = Array.from(container.children).indexOf(draggedItem);
                    const dropIndex = Array.from(container.children).indexOf(this);
                    
                    if (draggedIndex < dropIndex) {
                        container.insertBefore(draggedItem, this.nextSibling);
                    } else {
                        container.insertBefore(draggedItem, this);
                    }
                    
                    // Mettre √† jour l'ordre dans state
                    const boutique = container.id.replace('Products', '');
                    const newOrder = Array.from(container.children).map(card => parseInt(card.dataset.id));
                    reorderProducts(boutique, newOrder);
                    
                    toastr.success('Produit d√©plac√© !');
                }
            }
            
            function handleDragEnd() {
                this.classList.remove('dragging');
                this.classList.remove('drag-over');
                draggedItem = null;
                
                // Retirer les √©couteurs temporaires
                const cards = document.querySelectorAll('.product-card');
                cards.forEach(card => {
                    card.style.cursor = '';
                    card.removeEventListener('dragstart', handleDragStart);
                    card.removeEventListener('dragover', handleDragOver);
                    card.removeEventListener('drop', handleDrop);
                    card.removeEventListener('dragend', handleDragEnd);
                });
            }
            
            window.handleDragStart = handleDragStart;
            window.handleDragOver = handleDragOver;
            window.handleDragLeave = handleDragLeave;
            window.handleDrop = handleDrop;
            window.handleDragEnd = handleDragEnd;
        }

        function reorderProducts(boutique, newOrder) {
            // R√©organiser les produits dans state selon le nouvel ordre
            const orderedProducts = [];
            newOrder.forEach(id => {
                const product = state.products[boutique].find(p => p.id === id);
                if (product) {
                    orderedProducts.push(product);
                }
            });
            
            // Ajouter les produits manquants (au cas o√π)
            state.products[boutique].forEach(product => {
                if (!orderedProducts.find(p => p.id === product.id)) {
                    orderedProducts.push(product);
                }
            });
            
            state.products[boutique] = orderedProducts;
            saveState();
        }

        function toggleViewMode(boutique) {
            const container = document.getElementById(`${boutique}Products`);
            const currentMode = container.dataset.viewMode;
            const newMode = currentMode === 'grid' ? 'list' : 'grid';
            
            container.dataset.viewMode = newMode;
            
            if (newMode === 'list') {
                container.classList.add('list-view');
                container.style.gridTemplateColumns = '1fr';
                toastr.info('Vue liste activ√©e');
            } else {
                container.classList.remove('list-view');
                container.style.gridTemplateColumns = 'repeat(auto-fill, minmax(250px, 1fr))';
                toastr.info('Vue grille activ√©e');
            }
        }

        function updateProductCounts() {
            const bettyStock = state.products.betty.filter(p => p.status === 'stock').length;
            const bettyOrder = state.products.betty.filter(p => p.status === 'order').length;
            const laurentStock = state.products.laurent.filter(p => p.status === 'stock').length;
            const laurentOrder = state.products.laurent.filter(p => p.status === 'order').length;
            
            document.getElementById('bettyStockCount').textContent = bettyStock;
            document.getElementById('bettyOrderCount').textContent = bettyOrder;
            document.getElementById('laurentStockCount').textContent = laurentStock;
            document.getElementById('laurentOrderCount').textContent = laurentOrder;
        }

        // ============ PANIER INTELLIGENT ============
        function addToCart(productId, boutique) {
            const products = state.products[boutique];
            const product = products.find(p => p.id === productId);
            
            if (!product) {
                toastr.error('Produit non trouv√©');
                return;
            }
            
            if (product.status === 'order' && product.quantity === 0) {
                toastr.info('Ce produit est disponible sur commande seulement');
                return;
            }
            
            const existingItem = state.cart.find(item => item.id === productId && item.boutique === boutique);
            
            if (existingItem) {
                if (product.status === 'stock' && existingItem.quantity >= product.quantity) {
                    toastr.warning('Quantit√© maximale atteinte');
                    return;
                }
                existingItem.quantity += 1;
            } else {
                state.cart.push({
                    id: productId,
                    name: product.name,
                    price: product.price,
                    boutique: boutique,
                    boutiqueName: boutique === 'betty' ? 'Betty Kabey Smart' : 'Laurent Kabesha Smart',
                    quantity: 1,
                    maxQuantity: product.quantity
                });
            }
            
            updateCartUI();
            toastr.success('Ajout√© au panier !');
            saveState();
        }

        function addToCartFromTaskbar(productId) {
            // Trouver le produit dans toutes les boutiques
            let product = null;
            let boutique = null;
            
            for (const [boutiqueKey, products] of Object.entries(state.products)) {
                const found = products.find(p => p.id === productId);
                if (found) {
                    product = found;
                    boutique = boutiqueKey;
                    break;
                }
            }
            
            if (!product) {
                toastr.error('Produit non trouv√©');
                return;
            }
            
            addToCart(productId, boutique);
        }

        function updateCartUI() {
            const cartCount = document.getElementById('cartCount');
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            const cartEmpty = document.getElementById('cartEmpty');
            
            // Mettre √† jour le compteur
            const totalItems = state.cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            // Mettre √† jour la liste
            if (state.cart.length === 0) {
                cartEmpty.style.display = 'block';
                cartTotal.style.display = 'none';
                cartItems.innerHTML = '';
            } else {
                cartEmpty.style.display = 'none';
                cartTotal.style.display = 'block';
                
                cartItems.innerHTML = '';
                let total = 0;
                
                state.cart.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    
                    const div = document.createElement('div');
                    div.className = 'cart-item';
                    div.innerHTML = `
                        <div class="cart-item-header">
                            <span class="cart-item-name">${item.name}</span>
                            <span class="cart-item-price">${itemTotal}$</span>
                        </div>
                        <div style="color: rgba(255,255,255,0.7); font-size: 0.9rem; margin-bottom: 5px;">${item.boutiqueName}</div>
                        <div style="color: rgba(255,255,255,0.6); font-size: 0.8rem; margin-bottom: 10px;">${item.price}$ l'unit√©</div>
                        <div class="cart-item-controls">
                            <button class="quantity-btn" onclick="updateCartQuantity(${index}, -1)">-</button>
                            <span style="min-width: 30px; text-align: center;">${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateCartQuantity(${index}, 1)">+</button>
                            <button class="quantity-btn" onclick="removeFromCart(${index})" style="margin-left: auto;">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    cartItems.appendChild(div);
                });
                
                document.querySelector('.total-amount').textContent = total + '$';
            }
            
            // Mettre √† jour le localStorage
            localStorage.setItem('lbkCart', JSON.stringify(state.cart));
        }

        function updateCartQuantity(index, change) {
            const item = state.cart[index];
            const newQuantity = item.quantity + change;
            
            if (newQuantity < 1) {
                removeFromCart(index);
                return;
            }
            
            // V√©rifier la quantit√© maximale pour les produits en stock
            if (item.maxQuantity && newQuantity > item.maxQuantity) {
                toastr.warning(`Quantit√© maximale: ${item.maxQuantity}`);
                return;
            }
            
            item.quantity = newQuantity;
            updateCartUI();
            saveState();
        }

        function removeFromCart(index) {
            if (state.confirmDelete) {
                if (!confirm('Supprimer cet article du panier ?')) {
                    return;
                }
            }
            
            state.cart.splice(index, 1);
            updateCartUI();
            toastr.info('Article retir√©');
            saveState();
        }

        function clearCart() {
            if (state.confirmDelete) {
                if (!confirm('Vider tout le panier ?')) {
                    return;
                }
            }
            
            state.cart = [];
            updateCartUI();
            toastr.info('Panier vid√©');
            saveState();
        }

        function openCart() {
            document.getElementById('cartPanel').classList.add('active');
        }

        function closeCart() {
            document.getElementById('cartPanel').classList.remove('active');
        }

        function sendToWhatsApp() {
            if (state.cart.length === 0) {
                toastr.error('Le panier est vide !');
                return;
            }
            
            // Utiliser la fonction am√©lior√©e
            sendCartToWhatsApp();
        }

        function sendCartToWhatsApp() {
            if (state.cart.length === 0) {
                toastr.error('Le panier est vide !');
                return;
            }
            
            let message = "üì¶ COMMANDE LB-K SMART üì¶\n\n";
            let total = 0;
            
            // Grouper par boutique
            const byBoutique = {};
            state.cart.forEach(item => {
                if (!byBoutique[item.boutiqueName]) {
                    byBoutique[item.boutiqueName] = [];
                }
                byBoutique[item.boutiqueName].push(item);
            });
            
            // Construire le message
            Object.keys(byBoutique).forEach(boutiqueName => {
                message += `üè™ ${boutiqueName}\n`;
                message += "‚îÄ".repeat(30) + "\n";
                
                byBoutique[boutiqueName].forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    
                    message += `‚Ä¢ ${item.name}\n`;
                    message += `  Quantit√©: ${item.quantity}\n`;
                    message += `  Prix unitaire: ${item.price}$\n`;
                    message += `  Sous-total: ${itemTotal}$\n\n`;
                });
            });
            
            message += `üíµ TOTAL G√âN√âRAL: ${total}$\n\n`;
            message += `üìã R√âSUM√â DE LA COMMANDE\n`;
            message += `Nombre d'articles: ${state.cart.reduce((sum, item) => sum + item.quantity, 0)}\n`;
            message += `Boutiques concern√©es: ${Object.keys(byBoutique).length}\n\n`;
            
            message += `üë§ INFORMATIONS CLIENT\n`;
            message += `Nom: [√Ä compl√©ter]\n`;
            message += `T√©l√©phone: [√Ä compl√©ter]\n`;
            message += `Adresse: [√Ä compl√©ter]\n`;
            message += `M√©thode de paiement: [√Ä compl√©ter]\n\n`;
            
            message += `üìù NOTES SUPPL√âMENTAIRES\n`;
            message += `[Ajoutez vos commentaires ici]\n\n`;
            
            message += `‚ÑπÔ∏è INFORMATIONS IMPORTANTES\n`;
            message += `‚Ä¢ Les produits "En stock" sont livrables imm√©diatement\n`;
            message += `‚Ä¢ Les produits "Sur commande" n√©cessitent 15-21 jours\n`;
            message += `‚Ä¢ Paiement: Mobile Money, IllicoCash ou √† la livraison\n`;
            message += `‚Ä¢ Livraison gratuite pour commandes > 400kg\n`;
            
            // D√©tecter la boutique principale ou utiliser les deux num√©ros
            const boutiques = Object.keys(byBoutique);
            let phoneNumbers = [];
            
            if (boutiques.includes('Betty Kabey Smart')) {
                phoneNumbers.push('243971455335');
            }
            if (boutiques.includes('Laurent Kabesha Smart')) {
                phoneNumbers.push('243822937321');
            }
            
            // Si une seule boutique, utiliser son num√©ro
            // Si plusieurs boutiques, utiliser le num√©ro principal ou envoyer aux deux
            const mainPhone = phoneNumbers[0] || '243822937321';
            
            window.open(`https://wa.me/${mainPhone}?text=${encodeURIComponent(message)}`, '_blank');
            toastr.success('Redirection vers WhatsApp...');
            
            // Enregistrer la commande
            state.ordersToday++;
            updateCounters();
            saveState();
        }

        // ============ IA SERVICE CLIENT ============
        function openAIChat() {
            document.getElementById('aiChatPanel').classList.add('active');
            document.getElementById('aiInput').focus();
        }

        function sendAIMessage() {
            const input = document.getElementById('aiInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Ajouter le message utilisateur
            addAIMessage(message, 'user');
            input.value = '';
            
            // Simuler un d√©lai de traitement
            setTimeout(() => {
                const response = generateAIResponse(message);
                addAIMessage(response, 'ai');
            }, 1000 + Math.random() * 1000);
        }

        function addAIMessage(text, sender) {
            const container = document.getElementById('aiMessages');
            const div = document.createElement('div');
            div.className = `message ${sender}`;
            div.innerHTML = `<p>${text}</p>`;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        function generateAIResponse(question) {
            question = question.toLowerCase().trim();
            
            // Base de connaissances
            const knowledgeBase = {
                'prix': {
                    question: /prix|co√ªt|combien|tarif/,
                    response: `Nos prix varient selon les produits :\n‚Ä¢ Produits en stock : prix fixes\n‚Ä¢ Produits sur commande : prix selon transport et d√©lais\n\nPour un devis pr√©cis, consultez notre catalogue ou contactez-nous directement.`
                },
                'livraison': {
                    question: /livraison|transport|d√©lai|recevoir|exp√©dition/,
                    response: `Livraison disponible partout :\n‚Ä¢ Petits colis : prix selon distance\n‚Ä¢ Colis > 400kg : livraison GRATUITE\n‚Ä¢ D√©lais :\n  - Stock : 2-5 jours\n  - Sur commande : 15-21 jours (avion) ou 70-90 jours (bateau)\n\nNous livrons √† domicile !`
                },
                'paiement': {
                    question: /paiement|payer|moyen paiement|mobile money|illicocash/,
                    response: `Moyens de paiement accept√©s :\n‚úÖ Mobile Money\n‚úÖ IllicoCash\n‚úÖ Paiement √† la livraison\n\nAucun acompte requis pour les produits en stock.`
                },
                'stock': {
                    question: /stock|disponible|imm√©diat|en ligne/,
                    response: `Disponibilit√©s :\nüü¢ EN STOCK : Disponible imm√©diatement\nüü† SUR COMMANDE : Disponible apr√®s fabrication/importation\n\nLes produits "Sur commande" n√©cessitent :\n1. Image du mod√®le\n2. Marque sp√©cifi√©e\n3. Quantit√© et taille\n\nVoir le catalogue pour les d√©tails.`
                },
                'commande': {
                    question: /commander|acheter|comment prendre|proc√©dure/,
                    response: `Proc√©dure de commande :\n\n1. S√©lectionnez vos produits\n2. Ajoutez au panier\n3. Envoyez sur WhatsApp\n4. Fournissez :\n   - Vos coordonn√©es\n   - Adresse de livraison\n   - M√©thode de paiement\n\nNotre √©quipe vous contactera pour confirmation !`
                },
                'contact': {
                    question: /contact|t√©l√©phone|whatsapp|appeler|joindre/,
                    response: `Contacts :\n\nBetty Kabey Smart : +243 97 145 5335\nLaurent Kabesha Smart : +243 82 293 7321\n\nDisponible sur WhatsApp du lundi au dimanche, 8h-20h.`
                },
                'boutique': {
                    question: /betty|laurent|kabey|kabesha|qui est/,
                    response: `Nos boutiques :\n\nüè™ BETTY KABEY SMART\n‚Ä¢ Mode & v√™tements\n‚Ä¢ Cosm√©tiques & beaut√©\n‚Ä¢ Produits m√©nagers\n\nüè™ LAURENT KABESHA SMART\n‚Ä¢ √âlectronique & high-tech\n‚Ä¢ Pi√®ces automobile\n‚Ä¢ Produits pharmaceutiques\n\nDeux boutiques, une seule qualit√© !`
                },
                'retour': {
                    question: /retour|√©change|d√©faut|probl√®me|r√©clamation/,
                    response: `Politique de retour :\n\n‚úÖ Produits d√©fectueux : remplacement imm√©diat\n‚úÖ Taille incorrecte : √©change possible\n‚ùå Changement d'avis : non accept√©\n\nContactez-nous sous 48h pour toute r√©clamation.`
                },
                'default': {
                    response: `Je comprends votre demande ! Pour des informations plus pr√©cises sur :\n‚Ä¢ Les produits sp√©cifiques\n‚Ä¢ Les disponibilit√©s en temps r√©el\n‚Ä¢ Les commandes urgentes\n\nJe vous recommande de contacter directement notre √©quipe sur WhatsApp :\nüìû +243 82 293 7321\n\nIls pourront vous aider personnellement ! üòä`
                }
            };
            
            // Chercher une r√©ponse correspondante
            for (const [key, data] of Object.entries(knowledgeBase)) {
                if (data.question && data.question.test(question)) {
                    return data.response;
                }
            }
            
            // R√©ponse par d√©faut
            return knowledgeBase.default.response;
        }

        // ============ WHATSAPP BUSINESS ============
        function openWhatsAppPanel() {
            document.getElementById('whatsappPanel').classList.add('active');
        }

        function closeWhatsAppPanel() {
            document.getElementById('whatsappPanel').classList.remove('active');
        }

        function contactWhatsApp(boutique) {
            const phone = boutique === 'betty' ? '243971455335' : '243822937321';
            const message = "Bonjour, je souhaite avoir des informations sur vos produits.";
            window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`, '_blank');
        }

        // ============ NEWSLETTER ============
        function subscribeNewsletter() {
            const email = document.getElementById('newsletterEmail').value.trim();
            
            if (!validateEmail(email)) {
                toastr.error('Veuillez entrer une adresse email valide');
                return;
            }
            
            state.subscribers++;
            document.getElementById('subscriberCount').textContent = state.subscribers;
            document.getElementById('subscriberCountDrawer').textContent = state.subscribers;
            document.getElementById('newsletterEmail').value = '';
            
            toastr.success('Merci pour votre abonnement √† la newsletter !');
            
            // Masquer la newsletter pendant 7 jours
            document.getElementById('newsletterBar').classList.remove('active');
            localStorage.setItem('newsletterHidden', Date.now().toString());
            
            saveState();
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // ============ MINI PANNEAU ADMIN TOUCH ============
        function openMiniPanel() {
            if (!state.isAdmin) {
                toastr.error('Acc√®s admin requis');
                openAdminPanel();
                return;
            }
            
            document.getElementById('adminMiniPanel').classList.add('active');
            initTouchPanel();
        }

        function closeMiniPanel() {
            document.getElementById('adminMiniPanel').classList.remove('active');
        }

        function initTouchPanel() {
            const container = document.getElementById('touchButtons');
            container.innerHTML = '';
            
            // Cr√©er les boutons du mini panneau
            const touchButtons = [
                { id: 'config-buttons', icon: 'fas fa-sliders-h', label: 'Config Boutons', action: 'openButtonConfig' },
                { id: 'manage-products', icon: 'fas fa-boxes', label: 'G√©rer Produits', action: 'openProductManager' },
                { id: 'view-stats', icon: 'fas fa-chart-bar', label: 'Statistiques', action: 'openStats' },
                { id: 'backup-data', icon: 'fas fa-save', label: 'Sauvegarde', action: 'backupNow' },
                { id: 'system-info', icon: 'fas fa-info-circle', label: 'Info Syst√®me', action: 'showSystemInfo' },
                { id: 'quick-actions', icon: 'fas fa-bolt', label: 'Actions Rapides', action: 'openQuickActions' },
                { id: 'employee-access', icon: 'fas fa-user-shield', label: 'Acc√®s Employ√©s', action: 'openEmployeePanel' },
                { id: 'settings', icon: 'fas fa-cog', label: 'Param√®tres', action: 'openSettings' }
            ];
            
            touchButtons.forEach(btn => {
                const button = document.createElement('div');
                button.className = 'touch-button';
                button.dataset.id = btn.id;
                button.dataset.action = btn.action;
                button.innerHTML = `
                    <i class="${btn.icon}"></i>
                    <h4>${btn.label}</h4>
                `;
                
                button.addEventListener('click', function() {
                    executeTouchAction(this.dataset.action);
                });
                
                // Activer le drag & drop
                button.setAttribute('draggable', 'true');
                button.addEventListener('dragstart', handleTouchDragStart);
                
                container.appendChild(button);
            });
            
            // Activer le drop zone
            container.addEventListener('dragover', handleTouchDragOver);
            container.addEventListener('drop', handleTouchDrop);
            
            // Mettre √† jour la pr√©visualisation
            updateButtonPreview();
        }

        function handleTouchDragStart(e) {
            e.dataTransfer.setData('text/plain', this.dataset.id);
            this.style.opacity = '0.5';
        }

        function handleTouchDragOver(e) {
            e.preventDefault();
        }

        function handleTouchDrop(e) {
            e.preventDefault();
            const buttonId = e.dataTransfer.getData('text/plain');
            const button = document.querySelector(`.touch-button[data-id="${buttonId}"]`);
            const container = e.target.closest('#touchButtons');
            
            if (button && container) {
                // R√©organiser dans le DOM
                container.appendChild(button);
                button.style.opacity = '1';
                toastr.success('Bouton r√©organis√© !');
            }
        }

        function executeTouchAction(action) {
            switch(action) {
                case 'openButtonConfig':
                    openButtonConfig();
                    break;
                case 'openProductManager':
                    toastr.info('Gestionnaire de produits - Ouverture...');
                    // Ici vous pourriez ouvrir un panneau sp√©cifique
                    break;
                case 'openStats':
                    showStats();
                    break;
                case 'backupNow':
                    backupNow();
                    break;
                case 'showSystemInfo':
                    showSystemInfo();
                    break;
                case 'openQuickActions':
                    openQuickActions();
                    break;
                case 'openEmployeePanel':
                    openEmployeePanel();
                    break;
                case 'openSettings':
                    openSettings();
                    break;
            }
        }

        function openButtonConfig() {
            toastr.info('Configuration des boutons flottants');
            // Ici vous pourriez ouvrir un √©diteur de boutons
        }

        function setMovement(type) {
            state.currentMovement = type;
            
            document.querySelectorAll('.movement-option').forEach(opt => {
                opt.classList.remove('active');
                if (opt.dataset.movement === type) {
                    opt.classList.add('active');
                }
            });
            
            const directionControls = document.getElementById('directionControls');
            const styleControls = document.getElementById('styleControls');
            
            if (type === 'direction') {
                directionControls.style.display = 'block';
                styleControls.style.display = 'none';
            } else if (type === 'style') {
                directionControls.style.display = 'none';
                styleControls.style.display = 'block';
            } else {
                directionControls.style.display = 'none';
                styleControls.style.display = 'none';
            }
            
            toastr.info(`Mode mouvement: ${type}`);
        }

        function setDirection(direction) {
            state.currentDirection = direction;
            toastr.info(`Direction: ${direction}`);
            
            // Appliquer √† la pr√©visualisation
            const preview = document.getElementById('previewButton');
            preview.style.animation = 'none';
            setTimeout(() => {
                if (direction === 'vertical') {
                    preview.style.animation = 'float 3s ease-in-out infinite';
                } else if (direction === 'horizontal') {
                    preview.style.animation = 'slideInFromLeft 2s ease-in-out infinite';
                } else if (direction === 'rotate') {
                    preview.style.animation = 'rotate 5s linear infinite';
                } else if (direction === 'slide') {
                    preview.style.animation = 'slideInFromBottom 2s ease-in-out infinite';
                }
            }, 10);
        }

        function updateButtonPreview() {
            const preview = document.getElementById('previewButton');
            const colorPicker = document.getElementById('colorPicker');
            const sizeSlider = document.getElementById('sizeSlider');
            const opacitySlider = document.getElementById('opacitySlider');
            const iconInput = document.getElementById('iconInput');
            
            // Configurer les √©couteurs
            colorPicker.addEventListener('input', function() {
                preview.style.background = this.value;
            });
            
            sizeSlider.addEventListener('input', function() {
                const size = this.value;
                preview.style.width = `${size}px`;
                preview.style.height = `${size}px`;
                preview.style.fontSize = `${size * 0.025}rem`;
            });
            
            opacitySlider.addEventListener('input', function() {
                preview.style.opacity = `${this.value / 100}`;
            });
            
            iconInput.addEventListener('input', function() {
                if (this.value.startsWith('fa-')) {
                    preview.innerHTML = `<i class="fas ${this.value}"></i>`;
                }
            });
            
            // Appliquer les valeurs initiales
            const buttonConfig = state.floatingButtons.find(b => b.id === 'ai');
            if (buttonConfig) {
                colorPicker.value = buttonConfig.color;
                sizeSlider.value = buttonConfig.size;
                opacitySlider.value = buttonConfig.opacity;
                
                preview.style.background = buttonConfig.color;
                preview.style.width = `${buttonConfig.size}px`;
                preview.style.height = `${buttonConfig.size}px`;
                preview.style.fontSize = `${buttonConfig.size * 0.025}rem`;
                preview.style.opacity = `${buttonConfig.opacity / 100}`;
                
                if (buttonConfig.animation && buttonConfig.animation !== 'none') {
                    preview.style.animation = `${buttonConfig.animation} 2s infinite`;
                }
            }
        }

        function initButtonDragAndDrop() {
            const buttons = document.querySelectorAll('.floating-button');
            let isDragging = false;
            let currentButton = null;
            let offsetX = 0, offsetY = 0;
            
            buttons.forEach(button => {
                button.addEventListener('mousedown', startDrag);
                button.addEventListener('touchstart', startDragTouch);
                
                // Emp√™cher le menu contextuel
                button.addEventListener('contextmenu', e => e.preventDefault());
            });
            
            function startDrag(e) {
                e.preventDefault();
                isDragging = true;
                currentButton = e.target.closest('.floating-button');
                
                const rect = currentButton.getBoundingClientRect();
                offsetX = e.clientX - rect.left;
                offsetY = e.clientY - rect.top;
                
                currentButton.style.position = 'fixed';
                currentButton.style.zIndex = '10000';
                currentButton.style.cursor = 'grabbing';
                
                document.addEventListener('mousemove', drag);
                document.addEventListener('mouseup', stopDrag);
            }
            
            function startDragTouch(e) {
                e.preventDefault();
                isDragging = true;
                currentButton = e.target.closest('.floating-button');
                
                const touch = e.touches[0];
                const rect = currentButton.getBoundingClientRect();
                offsetX = touch.clientX - rect.left;
                offsetY = touch.clientY - rect.top;
                
                currentButton.style.position = 'fixed';
                currentButton.style.zIndex = '10000';
                
                document.addEventListener('touchmove', dragTouch);
                document.addEventListener('touchend', stopDrag);
            }
            
            function drag(e) {
                if (!isDragging || !currentButton) return;
                
                currentButton.style.left = `${e.clientX - offsetX}px`;
                currentButton.style.top = `${e.clientY - offsetY}px`;
            }
            
            function dragTouch(e) {
                if (!isDragging || !currentButton || e.touches.length !== 1) return;
                
                const touch = e.touches[0];
                currentButton.style.left = `${touch.clientX - offsetX}px`;
                currentButton.style.top = `${touch.clientY - offsetY}px`;
            }
            
            function stopDrag() {
                if (!isDragging || !currentButton) return;
                
                isDragging = false;
                currentButton.style.cursor = 'pointer';
                
                // Sauvegarder la nouvelle position
                const buttonId = currentButton.classList[1]; // La deuxi√®me classe est l'ID
                const buttonConfig = state.floatingButtons.find(b => b.id === buttonId);
                
                if (buttonConfig) {
                    // Mettre √† jour la position dans le state
                    const container = document.querySelector('.floating-buttons-container');
                    const buttons = Array.from(container.children);
                    const index = buttons.indexOf(currentButton);
                    
                    if (index !== -1) {
                        buttonConfig.position = index;
                        saveState();
                    }
                }
                
                // R√©organiser les boutons
                const container = document.querySelector('.floating-buttons-container');
                const sortedButtons = Array.from(container.children)
                    .sort((a, b) => {
                        const aId = a.classList[1];
                        const bId = b.classList[1];
                        const aConfig = state.floatingButtons.find(b => b.id === aId);
                        const bConfig = state.floatingButtons.find(b => b.id === bId);
                        return (aConfig?.position || 0) - (bConfig?.position || 0);
                    });
                
                // R√©ins√©rer dans l'ordre
                sortedButtons.forEach(button => {
                    container.appendChild(button);
                    button.style.position = '';
                    button.style.zIndex = '';
                    button.style.left = '';
                    button.style.top = '';
                });
                
                document.removeEventListener('mousemove', drag);
                document.removeEventListener('touchmove', dragTouch);
                document.removeEventListener('mouseup', stopDrag);
                document.removeEventListener('touchend', stopDrag);
                
                toastr.success('Position du bouton sauvegard√©e !');
            }
        }

        // ============ TERMINAL TECH ============
        function openTechTerminal() {
            if (!state.isAdmin) {
                toastr.error('Acc√®s admin requis');
                openAdminPanel();
                return;
            }
            
            document.getElementById('techTerminal').classList.add('active');
            document.getElementById('terminalInput').style.display = 'block';
            document.getElementById('terminalInput').focus();
        }

        function closeTechTerminal() {
            document.getElementById('techTerminal').classList.remove('active');
            document.getElementById('terminalInput').style.display = 'none';
        }

        function executeTerminalCommand(command) {
            const output = document.getElementById('terminalOutput');
            const prompt = document.getElementById('terminalPrompt');
            
            // Ajouter √† l'historique
            state.terminalHistory.push(command);
            state.terminalIndex = state.terminalHistory.length;
            
            // Afficher la commande
            output.innerHTML += `${command}\n`;
            
            // Ex√©cuter la commande
            let response = '';
            
            switch(command.toLowerCase().split(' ')[0]) {
                case 'help':
                    response = `Commandes disponibles:\n`;
                    response += `  help - Affiche cette aide\n`;
                    response += `  clear - Efface l'√©cran\n`;
                    response += `  backup - Cr√©e une sauvegarde\n`;
                    response += `  restore - Restaure une sauvegarde\n`;
                    response += `  deploy - D√©ploie les modifications\n`;
                    response += `  version - Affiche la version\n`;
                    response += `  status - √âtat du syst√®me\n`;
                    response += `  products - Liste des produits\n`;
                    response += `  employees - Liste des employ√©s\n`;
                    response += `  stats - Statistiques\n`;
                    break;
                    
                case 'clear':
                    output.innerHTML = 'LB-K SMART Terminal v1.0\nType \'help\' pour voir les commandes disponibles\n\n';
                    return;
                    
                case 'backup':
                    response = 'Cr√©ation de la sauvegarde...\n';
                    response += '‚úì Produits sauvegard√©s\n';
                    response += '‚úì Employ√©s sauvegard√©s\n';
                    response += '‚úì Param√®tres sauvegard√©s\n';
                    response += '‚úì Panier sauvegard√©\n';
                    response += `Sauvegarde compl√®te √†: ${new Date().toLocaleString()}\n`;
                    response += 'Fichier: backup_' + new Date().toISOString().split('T')[0] + '.json\n';
                    backupNow();
                    break;
                    
                case 'restore':
                    response = 'Restauration en cours...\n';
                    response += 'Utilisez: restore <fichier>\n';
                    response += 'Ou utilisez l\'interface graphique\n';
                    break;
                    
                case 'deploy':
                    response = 'D√©ploiement des modifications...\n';
                    response += '‚úì HTML/CSS/JS d√©ploy√©s\n';
                    response += '‚úì Base de donn√©es mise √† jour\n';
                    response += '‚úì Cache vid√©\n';
                    response += '‚úì Service worker actualis√©\n';
                    response += 'D√©ploiement r√©ussi !\n';
                    break;
                    
                case 'version':
                    response = 'LB-K SMART Terminal v1.0\n';
                    response += 'Derni√®re mise √† jour: ' + new Date().toLocaleDateString() + '\n';
                    response += 'Environnement: Production\n';
                    response += 'Droits: Administrateur\n';
                    break;
                    
                case 'status':
                    response = 'Statut du syst√®me:\n';
                    response += `  Produits: ${state.products.betty.length + state.products.laurent.length}\n`;
                    response += `  Employ√©s: ${state.employees.length}\n`;
                    response += `  Visiteurs: ${state.visitors}\n`;
                    response += `  Abonn√©s: ${state.subscribers}\n`;
                    response += `  Commandes aujourd'hui: ${state.ordersToday}\n`;
                    response += `  Derni√®re sauvegarde: ${state.lastBackup ? new Date(state.lastBackup).toLocaleString() : 'Jamais'}\n`;
                    break;
                    
                case 'products':
                    response = 'Liste des produits:\n';
                    response += `  Betty Kabey Smart: ${state.products.betty.length} produits\n`;
                    state.products.betty.forEach(p => {
                        response += `    - ${p.name} (${p.status === 'stock' ? 'Stock' : 'Commande'}) ${p.price}$\n`;
                    });
                    response += `  Laurent Kabesha Smart: ${state.products.laurent.length} produits\n`;
                    state.products.laurent.forEach(p => {
                        response += `    - ${p.name} (${p.status === 'stock' ? 'Stock' : 'Commande'}) ${p.price}$\n`;
                    });
                    break;
                    
                case 'employees':
                    response = 'Liste des employ√©s:\n';
                    state.employees.forEach(emp => {
                        response += `  - ${emp.name} (${emp.email})\n`;
                        response += `    Permissions: ${emp.permissions.join(', ')}\n`;
                    });
                    break;
                    
                case 'stats':
                    response = 'Statistiques d√©taill√©es:\n';
                    response += `  Visiteurs aujourd'hui: ${state.visitors}\n`;
                    response += `  Total abonn√©s: ${state.subscribers}\n`;
                    response += `  Commandes aujourd'hui: ${state.ordersToday}\n`;
                    
                    const bettyStock = state.products.betty.filter(p => p.status === 'stock').length;
                    const bettyOrder = state.products.betty.filter(p => p.status === 'order').length;
                    const laurentStock = state.products.laurent.filter(p => p.status === 'stock').length;
                    const laurentOrder = state.products.laurent.filter(p => p.status === 'order').length;
                    
                    response += `  Produits Betty:\n`;
                    response += `    En stock: ${bettyStock}\n`;
                    response += `    Sur commande: ${bettyOrder}\n`;
                    response += `  Produits Laurent:\n`;
                    response += `    En stock: ${laurentStock}\n`;
                    response += `    Sur commande: ${laurentOrder}\n`;
                    break;
                    
                default:
                    response = 'Commande non reconnue. Tapez "help" pour la liste.\n';
            }
            
            output.innerHTML += response + '\n&gt; ';
            output.scrollTop = output.scrollHeight;
        }

        function navigateTerminalHistory(direction) {
            if (state.terminalHistory.length === 0) return;
            
            state.terminalIndex = Math.max(0, Math.min(state.terminalHistory.length, state.terminalIndex + direction));
            
            const terminalInput = document.getElementById('terminalInput');
            if (state.terminalIndex < state.terminalHistory.length) {
                terminalInput.value = state.terminalHistory[state.terminalIndex];
            } else {
                terminalInput.value = '';
            }
        }

        // ============ GESTION EMPLOY√âS ============
        function openEmployeePanel() {
            if (!state.isAdmin) {
                toastr.error('Acc√®s admin requis');
                openAdminPanel();
                return;
            }
            
            document.getElementById('employeePanel').classList.add('active');
            renderEmployees();
        }

        function closeEmployeePanel() {
            document.getElementById('employeePanel').classList.remove('active');
        }

        function renderEmployees() {
            const container = document.getElementById('employeeList');
            container.innerHTML = '';
            
            state.employees.forEach((emp, index) => {
                const div = document.createElement('div');
                div.className = 'employee-item';
                div.innerHTML = `
                    <div>
                        <strong>${emp.name}</strong>
                        <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7); margin-top: 2px;">${emp.email}</div>
                        <div style="margin-top: 5px;">
                            ${emp.permissions.map(p => `<span class="permission-${p} permission-badge">${p}</span>`).join(' ')}
                            ${!emp.active ? '<span class="permission-banned permission-badge">inactif</span>' : ''}
                        </div>
                    </div>
                    <div class="employee-actions">
                        <button class="product-btn" onclick="editEmployeeDetails(${index})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="product-btn" onclick="toggleEmployeeStatus(${index})">
                            <i class="fas ${emp.active ? 'fa-ban' : 'fa-check'}"></i>
                        </button>
                        <button class="product-btn" onclick="changeEmployeePermissions(${index})">
                            <i class="fas fa-key"></i>
                        </button>
                        ${index > 0 ? `
                        <button class="product-btn" onclick="removeEmployee(${index})">
                            <i class="fas fa-trash"></i>
                        </button>
                        ` : ''}
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function addEmployee() {
            const name = prompt('Nom complet de l\'employ√© :');
            if (!name) return;
            
            const email = prompt('Email :');
            if (!email || !validateEmail(email)) {
                toastr.error('Email invalide');
                return;
            }
            
            const permissions = prompt('Permissions (lire, modifier, √©crire, admin) s√©par√©es par des virgules :', 'lire');
            const permissionArray = permissions ? permissions.split(',').map(p => p.trim()) : ['read'];
            
            state.employees.push({
                id: Date.now(),
                name,
                email,
                permissions: permissionArray,
                active: true
            });
            
            renderEmployees();
            toastr.success('Employ√© ajout√© !');
            saveState();
        }

        function editEmployeeDetails(index) {
            const emp = state.employees[index];
            
            const name = prompt('Nouveau nom :', emp.name);
            if (!name) return;
            
            const email = prompt('Nouvel email :', emp.email);
            if (!email || !validateEmail(email)) {
                toastr.error('Email invalide');
                return;
            }
            
            emp.name = name;
            emp.email = email;
            
            renderEmployees();
            toastr.success('Employ√© modifi√© !');
            saveState();
        }

        function toggleEmployeeStatus(index) {
            const emp = state.employees[index];
            emp.active = !emp.active;
            
            renderEmployees();
            toastr.info(`Employ√© ${emp.active ? 'activ√©' : 'd√©sactiv√©'}`);
            saveState();
        }

        function changeEmployeePermissions(index) {
            const emp = state.employees[index];
            const current = emp.permissions.join(', ');
            const permissions = prompt('Nouvelles permissions (lire, modifier, √©crire, admin) :', current);
            
            if (permissions) {
                emp.permissions = permissions.split(',').map(p => p.trim());
                renderEmployees();
                toastr.success('Permissions mises √† jour !');
                saveState();
            }
        }

        function removeEmployee(index) {
            if (index === 0) {
                toastr.error('Impossible de supprimer l\'administrateur principal');
                return;
            }
            
            if (confirm(`Supprimer l'employ√© ${state.employees[index].name} ?`)) {
                state.employees.splice(index, 1);
                renderEmployees();
                toastr.info('Employ√© supprim√©');
                saveState();
            }
        }

        function importEmployees() {
            toastr.info('Fonctionnalit√© d\'import CSV √† venir');
        }

        // ============ PARAM√àTRES SYST√àME ============
        function openSettings() {
            if (!state.isAdmin) {
                toastr.error('Acc√®s admin requis');
                openAdminPanel();
                return;
            }
            
            document.getElementById('settingsPanel').classList.add('active');
        }

        function closeSettings() {
            document.getElementById('settingsPanel').classList.remove('active');
        }

        function toggleAnimations() {
            const toggle = document.getElementById('animationsToggle');
            state.animationsEnabled = toggle.checked;
            
            if (state.animationsEnabled) {
                document.body.classList.add('animations-enabled');
                toastr.info('Animations activ√©es');
            } else {
                document.body.classList.remove('animations-enabled');
                toastr.info('Animations d√©sactiv√©es');
            }
        }

        function changeFontSize() {
            const select = document.getElementById('fontSizeSelect');
            state.fontSize = select.value;
            
            document.body.style.fontSize = state.fontSize === 'small' ? '14px' : 
                                         state.fontSize === 'large' ? '18px' : '16px';
            
            toastr.info(`Taille de police : ${state.fontSize}`);
        }

        function toggleConfirmDelete() {
            const toggle = document.getElementById('confirmDeleteToggle');
            state.confirmDelete = toggle.checked;
        }

        function toggleSounds() {
            const toggle = document.getElementById('soundToggle');
            state.soundsEnabled = toggle.checked;
        }

        function toggleAutoSave() {
            const toggle = document.getElementById('autoSaveToggle');
            state.autoSaveCart = toggle.checked;
        }

        function changeBackupInterval() {
            const select = document.getElementById('backupInterval');
            state.backupInterval = select.value;
        }

        function backupNow() {
            // Cr√©er un objet de sauvegarde
            const backup = {
                timestamp: Date.now(),
                products: state.products,
                employees: state.employees,
                settings: {
                    theme: state.theme,
                    fontSize: state.fontSize,
                    confirmDelete: state.confirmDelete,
                    soundsEnabled: state.soundsEnabled,
                    autoSaveCart: state.autoSaveCart
                },
                stats: {
                    visitors: state.visitors,
                    subscribers: state.subscribers,
                    ordersToday: state.ordersToday
                }
            };
            
            // Sauvegarder dans le localStorage
            localStorage.setItem('lbkBackup', JSON.stringify(backup));
            state.lastBackup = Date.now();
            
            // T√©l√©charger le fichier
            const dataStr = JSON.stringify(backup, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            const exportFileDefaultName = `lbk_backup_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            toastr.success('Sauvegarde cr√©√©e avec succ√®s !');
        }

        function restoreBackup() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const backup = JSON.parse(e.target.result);
                        
                        if (confirm('Restaurer cette sauvegarde ? Toutes les donn√©es actuelles seront remplac√©es.')) {
                            // Restaurer les donn√©es
                            if (backup.products) {
                                state.products = backup.products;
                            }
                            if (backup.employees) {
                                state.employees = backup.employees;
                            }
                            if (backup.settings) {
                                Object.assign(state, backup.settings);
                            }
                            if (backup.stats) {
                                Object.assign(state, backup.stats);
                            }
                            
                            // Mettre √† jour l'interface
                            initInterface();
                            initProducts();
                            renderEmployees();
                            updateCounters();
                            
                            toastr.success('Sauvegarde restaur√©e avec succ√®s !');
                            saveState();
                        }
                    } catch (error) {
                        toastr.error('Erreur lors de la restauration : fichier invalide');
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }

        function saveSettings() {
            // Les param√®tres sont d√©j√† mis √† jour en temps r√©el
            saveState();
            toastr.success('Param√®tres sauvegard√©s !');
            closeSettings();
        }

        function resetSettings() {
            if (confirm('R√©initialiser tous les param√®tres aux valeurs par d√©faut ?')) {
                // R√©initialiser les param√®tres
                state.theme = 'dark';
                state.animationsEnabled = true;
                state.fontSize = 'medium';
                state.confirmDelete = true;
                state.soundsEnabled = false;
                state.autoSaveCart = true;
                state.backupInterval = 'daily';
                
                // Mettre √† jour l'interface
                document.getElementById('themeToggle').checked = false;
                document.getElementById('animationsToggle').checked = true;
                document.getElementById('fontSizeSelect').value = 'medium';
                document.getElementById('confirmDeleteToggle').checked = true;
                document.getElementById('soundToggle').checked = false;
                document.getElementById('autoSaveToggle').checked = true;
                document.getElementById('backupInterval').value = 'daily';
                
                // Appliquer les changements
                document.body.classList.remove('light-mode');
                document.body.style.fontSize = '16px';
                
                saveState();
                toastr.success('Param√®tres r√©initialis√©s');
            }
        }

        // ============ FONCTIONS UTILITAIRES ============
        function showStats() {
            let stats = `üìä STATISTIQUES LB-K SMART üìä\n\n`;
            stats += `üë• Visiteurs aujourd'hui: ${state.visitors}\n`;
            stats += `üì∞ Abonn√©s newsletter: ${state.subscribers}\n`;
            stats += `üõí Commandes aujourd'hui: ${state.ordersToday}\n\n`;
            
            const bettyStock = state.products.betty.filter(p => p.status === 'stock').length;
            const bettyOrder = state.products.betty.filter(p => p.status === 'order').length;
            const laurentStock = state.products.laurent.filter(p => p.status === 'stock').length;
            const laurentOrder = state.products.laurent.filter(p => p.status === 'order').length;
            
            stats += `üè™ PRODUITS PAR BOUTIQUE\n`;
            stats += `Betty Kabey Smart:\n`;
            stats += `  En stock: ${bettyStock} produits\n`;
            stats += `  Sur commande: ${bettyOrder} produits\n\n`;
            stats += `Laurent Kabesha Smart:\n`;
            stats += `  En stock: ${laurentStock} produits\n`;
            stats += `  Sur commande: ${laurentOrder} produits\n\n`;
            
            stats += `üë®‚Äçüíº EMPLOY√âS ACTIFS: ${state.employees.filter(e => e.active).length}\n`;
            stats += `üíæ Derni√®re sauvegarde: ${state.lastBackup ? new Date(state.lastBackup).toLocaleString() : 'Jamais'}\n`;
            
            alert(stats);
        }

        function showSystemInfo() {
            let info = `üñ•Ô∏è INFORMATIONS SYST√àME üñ•Ô∏è\n\n`;
            info += `Platforme: LB-K SMART v1.0\n`;
            info += `Navigateur: ${navigator.userAgent.split(') ')[0].split('(')[1]}\n`;
            info += `R√©solution: ${window.screen.width}x${window.screen.height}\n`;
            info += `Mode affichage: ${state.displayMode}\n`;
            info += `Th√®me: ${state.theme === 'dark' ? 'Sombre' : 'Clair'}\n`;
            info += `Connexion: ${navigator.onLine ? 'En ligne' : 'Hors ligne'}\n`;
            info += `M√©moire: ${performance.memory ? Math.round(performance.memory.usedJSHeapSize / 1048576) + 'MB/' + Math.round(performance.memory.totalJSHeapSize / 1048576) + 'MB' : 'Non disponible'}\n`;
            
            alert(info);
        }

        function openQuickActions() {
            const actions = [
                { label: 'Nettoyer le cache', action: () => { localStorage.clear(); toastr.success('Cache nettoy√©'); } },
                { label: 'Rafra√Æchir la page', action: () => location.reload() },
                { label: 'Vider le panier', action: clearCart },
                { label: 'Exporter les donn√©es', action: backupNow },
                { label: 'Mode d√©veloppeur', action: openTechTerminal },
                { label: 'Tester notifications', action: () => toastr.info('Test de notification') }
            ];
            
            let message = 'üöÄ ACTIONS RAPIDES üöÄ\n\n';
            actions.forEach((action, index) => {
                message += `${index + 1}. ${action.label}\n`;
            });
            
            const choice = prompt(message + '\nEntrez le num√©ro de l\'action :');
            const index = parseInt(choice) - 1;
            
            if (index >= 0 && index < actions.length) {
                actions[index].action();
            }
        }

        function updateCounters() {
            // Mettre √† jour les compteurs
            document.getElementById('visitorCount').textContent = state.visitors;
            document.getElementById('subscriberCount').textContent = state.subscribers;
            document.getElementById('visitorCountDrawer').textContent = state.visitors;
            document.getElementById('subscriberCountDrawer').textContent = state.subscribers;
            document.getElementById('orderCountDrawer').textContent = state.ordersToday;
            
            // Simuler l'augmentation des visiteurs
            setInterval(() => {
                if (Math.random() > 0.7) {
                    state.visitors++;
                    document.getElementById('visitorCount').textContent = state.visitors;
                    document.getElementById('visitorCountDrawer').textContent = state.visitors;
                }
            }, 30000);
        }

        function loadSettings() {
            const saved = localStorage.getItem('lbkSettings');
            if (saved) {
                try {
                    const settings = JSON.parse(saved);
                    Object.assign(state, settings);
                } catch (e) {
                    console.error('Erreur chargement param√®tres:', e);
                }
            }
        }

        function saveState() {
            // Sauvegarder les param√®tres
            const settings = {
                theme: state.theme,
                animationsEnabled: state.animationsEnabled,
                fontSize: state.fontSize,
                confirmDelete: state.confirmDelete,
                soundsEnabled: state.soundsEnabled,
                autoSaveCart: state.autoSaveCart,
                backupInterval: state.backupInterval,
                displayMode: state.displayMode,
                floatingButtons: state.floatingButtons,
                products: state.products,
                employees: state.employees,
                adminPassword: state.adminPassword,
                subscribers: state.subscribers,
                visitors: state.visitors,
                ordersToday: state.ordersToday
            };
            
            localStorage.setItem('lbkSettings', JSON.stringify(settings));
            localStorage.setItem('lbkCart', JSON.stringify(state.cart));
        }

        // ============ FONCTIONS GLOBALES ============
        // Exporter les fonctions n√©cessaires au scope global
        window.loginAdmin = loginAdmin;
        window.closeAdmin = closeAdmin;
        window.openAdminPanel = openAdminPanel;
        window.changeAdminPassword = changeAdminPassword;
        window.setDisplayMode = setDisplayMode;
        window.toggleTaskbar = toggleTaskbar;
        window.openCart = openCart;
        window.closeCart = closeCart;
        window.openAIChat = openAIChat;
        window.sendAIMessage = sendAIMessage;
        window.openWhatsAppPanel = openWhatsAppPanel;
        window.closeWhatsAppPanel = closeWhatsAppPanel;
        window.contactWhatsApp = contactWhatsApp;
        window.sendCartToWhatsApp = sendCartToWhatsApp;
        window.openMiniPanel = openMiniPanel;
        window.closeMiniPanel = closeMiniPanel;
        window.setMovement = setMovement;
        window.setDirection = setDirection;
        window.openTechTerminal = openTechTerminal;
        window.closeTechTerminal = closeTechTerminal;
        window.openEmployeePanel = openEmployeePanel;
        window.closeEmployeePanel = closeEmployeePanel;
        window.addEmployee = addEmployee;
        window.editEmployeeDetails = editEmployeeDetails;
        window.toggleEmployeeStatus = toggleEmployeeStatus;
        window.changeEmployeePermissions = changeEmployeePermissions;
        window.removeEmployee = removeEmployee;
        window.importEmployees = importEmployees;
        window.addProduct = addProduct;
        window.editProduct = editProduct;
        window.uploadProductImage = uploadProductImage;
        window.importImages = importImages;
        window.organizeProducts = organizeProducts;
        window.toggleProductVisibility = toggleProductVisibility;
        window.toggleViewMode = toggleViewMode;
        window.addToCart = addToCart;
        window.addToCartFromTaskbar = addToCartFromTaskbar;
        window.updateCartQuantity = updateCartQuantity;
        window.removeFromCart = removeFromCart;
        window.clearCart = clearCart;
        window.sendToWhatsApp = sendToWhatsApp;
        window.subscribeNewsletter = subscribeNewsletter;
        window.scrollToSection = scrollToSection;
        window.openSettings = openSettings;
        window.closeSettings = closeSettings;
        window.toggleTheme = toggleTheme;
        window.toggleThemeSetting = toggleThemeSetting;
        window.toggleAnimations = toggleAnimations;
        window.changeFontSize = changeFontSize;
        window.toggleConfirmDelete = toggleConfirmDelete;
        window.toggleSounds = toggleSounds;
        window.toggleAutoSave = toggleAutoSave;
        window.changeBackupInterval = changeBackupInterval;
        window.backupNow = backupNow;
        window.restoreBackup = restoreBackup;
        window.saveSettings = saveSettings;
        window.resetSettings = resetSettings;
        window.showStats = showStats;
        window.showSystemInfo = showSystemInfo;
        window.openQuickActions = openQuickActions;
        window.closeDrawer = closeDrawer;
        window.closeAllPanels = closeAllPanels;
    </script>
</body>
</html>
